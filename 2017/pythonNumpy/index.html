<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" >
    <meta name="robots" content="index,follow" />
    <meta name="author" content="sunny" />
    <meta http-equiv="X-UA-Compatible" content="IE=11,IE=10,IE=9,IE=8" >
    <meta name="baidu-site-verification" content="rAWa6yMQTj" />
    
    <title>python3 numpy | sunny</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" >
    <meta name="keywords" content="sunny, 前端, Web, 前端开发" >
    <meta name="description" content="sunny个人技术小站" >
    <meta name="referrer" content="no-referrer" />

    
    <link rel="alternative" href="/atom.xml" title="sunny" type="application/atom+xml" >
    
    
    <link rel="shortcut icon" href="/favicon.ico" >
    
    <link rel="stylesheet" href="/css/style.css">
    <script src="/js/utils.js"></script>
    <script src="/js/seo.js"></script>
    
    <script>
		var _hmt = _hmt || [];
		(function() {
		  var hm = document.createElement("script");
		  hm.src = "https://hm.baidu.com/hm.js?d125f138759db3cb063c66a0f298f768";
		  var s = document.getElementsByTagName("script")[0];
		  s.parentNode.insertBefore(hm, s);
		})();
    </script>

</head>

<body class="home">
    <!-- 博客头部 -->
    <header class="header">
    <section class="container header-main">
        <div class="logo">
            <a href="/">
                <div class="cover">
                    <span class="name">sunny</span>
                    <span class="description">Happy Every Day</span>
                </div>
            </a>
        </div>
        <div class="dropnav icon iconfont icon-menu" id="btnDropNav"></div>
        <ul class="menu hidden" id="menu">
            
            <li rel="/2017/pythonNumpy/index.html" class="item ">
                <a href="/" title="首页" class="icon iconfont icon-home">&nbsp;首页</a>
            </li>
            
            <li rel="/2017/pythonNumpy/index.html" class="item ">
                <a href="/lab/" title="实验室" class="icon iconfont icon-code">&nbsp;实验室</a>
            </li>
            
            <li rel="/2017/pythonNumpy/index.html" class="item ">
                <a href="/python3/" title="python3" class="icon iconfont icon-python">&nbsp;python3</a>
            </li>
            
            <li rel="/2017/pythonNumpy/index.html" class="item ">
                <a href="/skills/" title="技巧" class="icon iconfont icon-skill">&nbsp;技巧</a>
            </li>
            
            <li rel="/2017/pythonNumpy/index.html" class="item ">
                <a href="/interview/" title="面试" class="icon iconfont icon-interview">&nbsp;面试</a>
            </li>
            
            <li rel="/2017/pythonNumpy/index.html" class="item ">
                <a href="/about/" title="关于" class="icon iconfont icon-about">&nbsp;关于</a>
            </li>
            
            <li rel="/2017/pythonNumpy/index.html" class="item ">
                <a href="/comment/" title="留言" class="icon iconfont icon-comment">&nbsp;留言</a>
            </li>
            
        </ul>
        <div class="profile clearfix">
            <div class="feeds fl">
                
                
                <p class="links">
                    
                        <a href="https://github.com/sunnyShining" target="_blank">Github</a>
                        |
                    
                        <a href="https://gitee.com/sunnyShining" target="_blank">gitee</a>
                        |
                    
                        <a href="https://tongji.baidu.com/web/26214126/homepage/index" target="_blank">百度统计</a>
                        
                    
                </p>
                <p class="sns">
                    
                        <a href="https://weibo.com/u/2449308854" class="sinaweibo" target="_blank"><b>■</b> 新浪微博</a>
                    
                        <a href="https://www.jianshu.com/u/e53a4b002124" class="qqweibo" target="_blank"><b>■</b> 简书</a>
                    
                    <a href="javascript: void(0);" class="wechat">
                        <b>■</b>
                        公众号
                        <span class="popover">
                            <img src="/img/wechat_mp.jpg" width="120" height="120" alt="我的微信订阅号">
                            <i class="arrow"></i>
                        </span>
                    </a>
                </p>
                
            </div>
            <div class="avatar fr">
                <img src="/img/sunny.jpg" alt="avatar" title="sunny" >
            </div>
        </div>
    </section>
</header>

    <!-- 博客正文 -->
    <div class="container body clearfix">
        <section class="content">
            <div class="content-main widget">
                <!-- 文章页 -->
<!-- 文章 -->
<article class="post article">
    <header class="text-center">
        <h3 class="post-title"><span>python3 numpy</span></h3>
    </header>
    <p class="post-meta text-center">
        风吴痕 发表于
        <time datetime="2017-10-10T08:21:23.000Z">2017-10-10</time>
    </p>
    <div class="post-content">
        <blockquote>
<p>本文转载自<a href="https://blog.csdn.net/wc781708249/article/details/78194039?locationNum=10&amp;fps=1" target="_blank" rel="noopener">https://blog.csdn.net/wc781708249/article/details/78194039?locationNum=10&amp;fps=1</a></p>
</blockquote>
<p>参考地址：</p>
<p>1、<a href="https://www.shiyanlou.com/courses/912" target="_blank" rel="noopener">https://www.shiyanlou.com/courses/912</a></p>
<p>2、<a href="https://www.shiyanlou.com/courses/348" target="_blank" rel="noopener">https://www.shiyanlou.com/courses/348</a></p>
<p>3、<a href="https://docs.scipy.org/doc/numpy/reference/" target="_blank" rel="noopener">https://docs.scipy.org/doc/numpy/reference/</a></p>
<p>4、<a href="https://docs.scipy.org/doc/numpy/user/index.html#user" target="_blank" rel="noopener">https://docs.scipy.org/doc/numpy/user/index.html#user</a></p>
<p>5、<a href="http://scipy.github.io/old-wiki/pages/Tentative_NumPy_Tutorial" target="_blank" rel="noopener">http://scipy.github.io/old-wiki/pages/Tentative_NumPy_Tutorial</a></p>
<p>6、<a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html" target="_blank" rel="noopener">https://docs.scipy.org/doc/numpy-dev/user/quickstart.html</a></p>
<a id="more"></a>
<h2 id="1、Numpy-数值类型"><a href="#1、Numpy-数值类型" class="headerlink" title="1、Numpy 数值类型"></a>1、Numpy 数值类型</h2><p>Python本身支持的数值类型有<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">int</code>（整型，python2中存在long长整型）、<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">float</code>（浮点型）、<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">bool</code>（布尔型）和<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">complex</code>（复数型）。</p>
<p>而 Numpy 支持比 Python 本身更为丰富的数值类型，细分如下：</p>
<ol>
<li><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">bool</code>：布尔类型，1 个字节，值为 True 或 False。</li>
<li><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">int</code>：整数类型，通常为 int64 或 int32 。</li>
<li><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">intc</code>：与 C 里的 int 相同，通常为 int32 或 int64。</li>
<li><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">intp</code>：用于索引，通常为 int32 或 int64。</li>
<li><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">int8</code>：字节（从 -128 到 127）</li>
<li><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">int16</code>：整数（从 -32768 到 32767）</li>
<li><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">int32</code>：整数（从 -2147483648 到 2147483647）</li>
<li><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">int64</code>：整数（从 -9223372036854775808 到 9223372036854775807）</li>
<li><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">uint8</code>：无符号整数（从 0 到 255）</li>
<li><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">uint16</code>：无符号整数（从 0 到 65535）</li>
<li><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">uint32</code>：无符号整数（从 0 到 4294967295）</li>
<li><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">uint64</code>：无符号整数（从 0 到 18446744073709551615）</li>
<li><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">float</code>：float64 的简写。</li>
<li><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">float16</code>：半精度浮点，5 位指数，10 位尾数</li>
<li><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">float32</code>：单精度浮点，8 位指数，23 位尾数</li>
<li><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">float64</code>：双精度浮点，11 位指数，52 位尾数</li>
<li><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">complex</code>：complex128 的简写。</li>
<li><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">complex64</code>：复数，由两个 32 位浮点表示。</li>
<li><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(199,37,78);background-color:rgb(249,242,244);">complex128</code>：复数，由两个 64 位浮点表示。</li>
</ol>
<p>在 Numpy 中，上面提到的这些数值类型都被归于 dtype（data-type） 对象的实例。<br>我们可以用 numpy.dtype(object, align, copy) 来指定数值类型。而在数组里面，可以用 dtype= 参数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.array([<span class="number">1.1</span>, <span class="number">2.2</span>, <span class="number">3.3</span>], dtype=np.float64) <span class="comment"># 指定 1 维数组的数值类型为 float64</span></span><br></pre></td></tr></table></figure>
<p>另外，你可以使用 .astype() 方法在不同的数值类型之间相互转换。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.astype(int) <span class="comment"># 将 a 的数值类型从 float64 转换为 int</span></span><br></pre></td></tr></table></figure>
<p>最后，你可以使用 .dtype 来查看 dtype 属性。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.dtype <span class="comment"># 查看 a 的数值类型</span></span><br></pre></td></tr></table></figure>
<h2 id="2、Numpy-多维数组"><a href="#2、Numpy-多维数组" class="headerlink" title="2、Numpy 多维数组"></a>2、Numpy 多维数组</h2><h3 id="2-1-ndarray-介绍"><a href="#2-1-ndarray-介绍" class="headerlink" title="2.1 ndarray 介绍"></a>2.1 ndarray 介绍</h3><p>在 python 内建对象中，数组有三种形式：</p>
<ol>
<li>list 列表：[1, 2, 3]</li>
<li>Tuple 元组：(1, 2, 3, 4, 5)</li>
<li>Dict 字典：{A:1, B:2}</li>
</ol>
<p>Numpy最核心且最重要的一个特性就是ndarray多维数组对象，它区别于python的标准类，拥有对高维数组的处理能力，这也是数值计算过程中缺一不可的重要特性。</p>
<p>Numpy中，ndarray类具有六个参数，它们分别为：</p>
<ol>
<li>shape：数组的形状。</li>
<li>dtype：数据类型。</li>
<li>buffer：对象暴露缓冲区接口。</li>
<li>offset：数组数据的偏移量。</li>
<li>strides：数据步长。</li>
<li>order：{‘C’，’F’}，以行或列为主排列顺序。</li>
</ol>
<p>下面，我们来了解创建 ndarray 的一些方法。在 numpy 中，我们主要通过以下 5 种途径创建数组，它们分别是：</p>
<ol>
<li>从 Python 数组结构列表，元组等转换。</li>
<li>使用 np.arange、np.ones、np.zeros 等 numpy 原生方法。</li>
<li>从存储空间读取数组。</li>
<li>通过使用字符串或缓冲区从原始字节创建数组。</li>
<li>使用特殊函数，如 random。</li>
</ol>
<h3 id="2-2-从列表或元组转换"><a href="#2-2-从列表或元组转换" class="headerlink" title="2.2 从列表或元组转换"></a>2.2 从列表或元组转换</h3><p>在 numpy 中，我们使用 numpy.array 将列表或元组转换为 ndarray 数组。其方法为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.array(object, dtype=<span class="keyword">None</span>, copy=<span class="keyword">True</span>, order=<span class="keyword">None</span>, subok=<span class="keyword">False</span>, ndmin=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p>其中，参数：</p>
<ul>
<li>object：列表、元组等。</li>
<li>dtype：数据类型。如果未给出，则类型为被保存对象所需的最小类型。</li>
<li>copy：布尔来写，默认 True，表示复制对象。</li>
<li>order：顺序。</li>
<li>subok：布尔类型，表示子类是否被传递。</li>
<li>ndmin：生成的数组应具有的最小维数。</li>
</ul>
<p>下面，通过列表创建一个 ndarray 数组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">np.array([[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]],[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]],[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]]])</span><br></pre></td></tr></table></figure>
<p>或者是列表和元组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">np.array([(<span class="number">1</span>,<span class="number">2</span>),(<span class="number">3</span>,<span class="number">4</span>),(<span class="number">5</span>,<span class="number">6</span>)])</span><br></pre></td></tr></table></figure>
<h3 id="2-3-arange-方法创建"><a href="#2-3-arange-方法创建" class="headerlink" title="2.3 arange 方法创建"></a>2.3 arange 方法创建</h3><p>除了直接使用 array 方法创建 ndarray，在 numpy 中还有一些方法可以创建一些有规律性的多维数。首先，我们来看一看 arange()。arange() 的功能是在给定区间内创建一系列均匀间隔的值。方法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.arange(start, stop, step, dtype=<span class="keyword">None</span>)</span><br></pre></td></tr></table></figure>
<p>你需要先设置值所在的区间，这里为[开始， 停止），你应该能发现这是一个半开半闭区间。然后，在设置 step 步长用于设置值之间的间隔。最后的可选参数 dtype可以设置返回ndarray 的值类型。<br>举个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment"># 在区间 [3, 7) 中以 0.5 为步长新建数组</span></span><br><span class="line">np.arange(<span class="number">3</span>, <span class="number">7</span>, <span class="number">0.5</span>, dtype=<span class="string">'float32'</span>)</span><br><span class="line"><span class="comment"># array([ 3. ,  3.5,  4. ,  4.5,  5. ,  5.5,  6. ,  6.5], dtype=float32)</span></span><br></pre></td></tr></table></figure>
<h3 id="2-4-linspace-方法创建"><a href="#2-4-linspace-方法创建" class="headerlink" title="2.4 linspace 方法创建"></a>2.4 linspace 方法创建</h3><p>linspace方法也可以像arange方法一样，创建数值有规律的数组。linspace用于在指定的区间内返回间隔均匀的值。其方法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.linspace(start, stop, num=<span class="number">50</span>, endpoint=<span class="keyword">True</span>, retstep=<span class="keyword">False</span>, dtype=<span class="keyword">None</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>start：序列的起始值。</li>
<li>stop：序列的结束值。</li>
<li>num：生成的样本数。默认值为50。</li>
<li>endpoint：布尔值，如果为真，则最后一个样本包含在序列内。</li>
<li>retstep：布尔值，如果为真，返回间距。</li>
<li>dtype：数组的类型。</li>
</ul>
<p>举个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">np.linspace(<span class="number">0</span>, <span class="number">10</span>, <span class="number">10</span>, endpoint=<span class="keyword">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># array([  0.      ,   1.11111111,   2.22222222,   3.33333333,</span></span><br><span class="line">         <span class="number">4.44444444</span>,   <span class="number">5.55555556</span>,   <span class="number">6.66666667</span>,   <span class="number">7.77777778</span>,</span><br><span class="line">         <span class="number">8.88888889</span>,  <span class="number">10.</span>        ])</span><br><span class="line">np.linspace(<span class="number">0</span>, <span class="number">10</span>, <span class="number">10</span>, endpoint=<span class="keyword">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># array([ 0.,  1.,  2.,  3.,  4.,  5.,  6.,  7.,  8.,  9.])</span></span><br></pre></td></tr></table></figure>
<h3 id="2-5-ones-方法创建"><a href="#2-5-ones-方法创建" class="headerlink" title="2.5 ones 方法创建"></a>2.5 ones 方法创建</h3><p>numpy.ones 用于快速创建数值全部为 1 的多维数组。其方法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.ones(shape, dtype=<span class="keyword">None</span>, order=<span class="string">'C'</span>)</span><br></pre></td></tr></table></figure>
<p>其中：</p>
<ul>
<li>shape：用于指定数组形状，例如（1， 2）或 3。</li>
<li>dtype：数据类型。</li>
<li>order：{‘C’，’F’}，按行或列方式储存数组。</li>
</ul>
<p>举个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">print(np.ones((<span class="number">2</span>,<span class="number">3</span>)))</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">[[ 1.  1.  1.]</span></span><br><span class="line"><span class="string"> [ 1.  1.  1.]]</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>
<h3 id="2-6-zeros-方法创建"><a href="#2-6-zeros-方法创建" class="headerlink" title="2.6 zeros 方法创建"></a>2.6 zeros 方法创建</h3><p>zeros 方法和上面的 ones 方法非常相似，不同的地方在于，这里全部填充为 0。zeros 方法和 ones 是一致的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.zeros(shape, dtype=<span class="keyword">None</span>, order=<span class="string">'C'</span>)</span><br></pre></td></tr></table></figure>
<p>其中：</p>
<ul>
<li>shape：用于指定数组形状，例如（1， 2）或3。</li>
<li>dtype：数据类型。</li>
<li>order：{‘C’，’F’}，按行或列方式储存数组。</li>
</ul>
<p>举个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">print(np.zeros((<span class="number">3</span>,<span class="number">2</span>)))</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[ 0.  0.]</span></span><br><span class="line"><span class="string"> [ 0.  0.]</span></span><br><span class="line"><span class="string"> [ 0.  0.]]</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<h3 id="2-7-eye-方法创建"><a href="#2-7-eye-方法创建" class="headerlink" title="2.7 eye 方法创建"></a>2.7 eye 方法创建</h3><p>numpy.eye 用于创建一个二维数组，其特点是k 对角线上的值为 1，其余值全部为0。方法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.eye(N, M=<span class="keyword">None</span>, k=<span class="number">0</span>, dtype=&lt;type <span class="string">'float'</span>&gt;)</span><br></pre></td></tr></table></figure>
<p>其中：</p>
<ul>
<li>N：输出数组的行数。</li>
<li>M：输出数组的列数。</li>
<li>k：对角线索引：0（默认）是指主对角线，正值是指上对角线，负值是指下对角线。</li>
</ul>
<p>举个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">print(np.eye(<span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>))</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[ 0.  0.  0.  1.]</span></span><br><span class="line"><span class="string"> [ 0.  0.  0.  0.]</span></span><br><span class="line"><span class="string"> [ 0.  0.  0.  0.]</span></span><br><span class="line"><span class="string"> [ 0.  0.  0.  0.]</span></span><br><span class="line"><span class="string"> [ 0.  0.  0.  0.]]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(np.eye(<span class="number">5</span>, <span class="number">4</span>, <span class="number">0</span>))</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[ 1.  0.  0.  0.]</span></span><br><span class="line"><span class="string"> [ 0.  1.  0.  0.]</span></span><br><span class="line"><span class="string"> [ 0.  0.  1.  0.]</span></span><br><span class="line"><span class="string"> [ 0.  0.  0.  1.]</span></span><br><span class="line"><span class="string"> [ 0.  0.  0.  0.]]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(np.eye(<span class="number">5</span>, <span class="number">4</span>, <span class="number">-1</span>))</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[ 0.  0.  0.  0.]</span></span><br><span class="line"><span class="string"> [ 1.  0.  0.  0.]</span></span><br><span class="line"><span class="string"> [ 0.  1.  0.  0.]</span></span><br><span class="line"><span class="string"> [ 0.  0.  1.  0.]</span></span><br><span class="line"><span class="string"> [ 0.  0.  0.  1.]]</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<h3 id="2-8-从已知数据创建"><a href="#2-8-从已知数据创建" class="headerlink" title="2.8 从已知数据创建"></a>2.8 从已知数据创建</h3><p>我们还可以从已知数据文件、函数中创建 ndarray。numpy 提供了下面 5 个方法：</p>
<ol>
<li>frombuffer（buffer）：将缓冲区转换为 1 维数组。</li>
<li>fromfile（file，dtype，count，sep）：从文本或二进制文件中构建多维数组。</li>
<li>fromfunction（function，shape）：通过函数返回值来创建多维数组。</li>
<li>fromiter（iterable，dtype，count）：从可迭代对象创建 1 维数组。</li>
<li>fromstring（string，dtype，count，sep）：从字符串中创建 1 维数组。</li>
</ol>
<p>举个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">print(np.fromfunction(<span class="keyword">lambda</span> a, b: a + b, (<span class="number">5</span>, <span class="number">4</span>)))</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">[[ 0.  1.  2.  3.]</span></span><br><span class="line"><span class="string"> [ 1.  2.  3.  4.]</span></span><br><span class="line"><span class="string"> [ 2.  3.  4.  5.]</span></span><br><span class="line"><span class="string"> [ 3.  4.  5.  6.]</span></span><br><span class="line"><span class="string"> [ 4.  5.  6.  7.]]</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>
<h3 id="2-9-linspace-与-logspace"><a href="#2-9-linspace-与-logspace" class="headerlink" title="2.9 linspace 与 logspace"></a>2.9 linspace 与 logspace</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># using linspace, both end points ARE included</span></span><br><span class="line">linspace(<span class="number">0</span>, <span class="number">10</span>, <span class="number">25</span>)</span><br><span class="line"></span><br><span class="line">=&gt; array([  0.        ,   0.41666667,   0.83333333,   1.25      ,</span><br><span class="line">            <span class="number">1.66666667</span>,   <span class="number">2.08333333</span>,   <span class="number">2.5</span>       ,   <span class="number">2.91666667</span>,</span><br><span class="line">            <span class="number">3.33333333</span>,   <span class="number">3.75</span>      ,   <span class="number">4.16666667</span>,   <span class="number">4.58333333</span>,</span><br><span class="line">            <span class="number">5.</span>        ,   <span class="number">5.41666667</span>,   <span class="number">5.83333333</span>,   <span class="number">6.25</span>      ,</span><br><span class="line">            <span class="number">6.66666667</span>,   <span class="number">7.08333333</span>,   <span class="number">7.5</span>       ,   <span class="number">7.91666667</span>,</span><br><span class="line">            <span class="number">8.33333333</span>,   <span class="number">8.75</span>      ,   <span class="number">9.16666667</span>,   <span class="number">9.58333333</span>,  <span class="number">10.</span>        ])</span><br><span class="line"></span><br><span class="line">logspace(<span class="number">0</span>, <span class="number">10</span>, <span class="number">10</span>, base=e)</span><br><span class="line"></span><br><span class="line">=&gt; array([  1.00000000e+00,   3.03773178e+00,   9.22781435e+00,</span><br><span class="line">            <span class="number">2.80316249e+01</span>,   <span class="number">8.51525577e+01</span>,   <span class="number">2.58670631e+02</span>,</span><br><span class="line">            <span class="number">7.85771994e+02</span>,   <span class="number">2.38696456e+03</span>,   <span class="number">7.25095809e+03</span>,</span><br><span class="line">            <span class="number">2.20264658e+04</span>])</span><br></pre></td></tr></table></figure>
<h3 id="2-10-mgrid"><a href="#2-10-mgrid" class="headerlink" title="2.10 mgrid"></a>2.10 mgrid</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">x, y = mgrid[<span class="number">0</span>:<span class="number">5</span>, <span class="number">0</span>:<span class="number">5</span>] <span class="comment"># similar to meshgrid in MATLAB</span></span><br><span class="line"></span><br><span class="line">x</span><br><span class="line">=&gt; array([[0, 0, 0, 0, 0],</span><br><span class="line">          [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">          [<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>],</span><br><span class="line">          [<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>],</span><br><span class="line">          [<span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>]])</span><br><span class="line"></span><br><span class="line">y</span><br><span class="line">=&gt; array([[0, 1, 2, 3, 4],</span><br><span class="line">          [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">          [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">          [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">          [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]])</span><br></pre></td></tr></table></figure>
<h3 id="2-11-diag"><a href="#2-11-diag" class="headerlink" title="2.11 diag"></a>2.11 diag</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># a diagonal matrix</span></span><br><span class="line">diag([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line">=&gt; array([[1, 0, 0],</span><br><span class="line">          [<span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>],</span><br><span class="line">          [<span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># diagonal with offset from the main diagonal</span></span><br><span class="line">diag([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], k=<span class="number">1</span>) </span><br><span class="line"></span><br><span class="line">=&gt; array([[0, 1, 0, 0],</span><br><span class="line">          [<span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>],</span><br><span class="line">          [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>],</span><br><span class="line">          [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]])</span><br></pre></td></tr></table></figure>
<h3 id="2-12-文件-I-O-创建数组"><a href="#2-12-文件-I-O-创建数组" class="headerlink" title="2.12 文件 I/O 创建数组"></a>2.12 文件 I/O 创建数组</h3><h4 id="2-12-1-CSV"><a href="#2-12-1-CSV" class="headerlink" title="2.12.1 CSV"></a>2.12.1 CSV</h4><p>CSV是一种常用的数据格式化文件类型，为了从中读取数据，我们使用 numpy.genfromtxt 函数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget http://labfile.oss.aliyuncs.com/courses/348/stockholm_td_adj.dat</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"> </span><br><span class="line">data = np.genfromtxt(<span class="string">'stockholm_td_adj.dat'</span>)</span><br><span class="line">print(data.shape) <span class="comment"># (77431, 7)</span></span><br><span class="line"> </span><br><span class="line">data = np.loadtxt(<span class="string">'stockholm_td_adj.dat'</span>)</span><br><span class="line">print(data.shape) <span class="comment"># (77431, 7)</span></span><br><span class="line"> </span><br><span class="line">data = np.mafromtxt(<span class="string">'stockholm_td_adj.dat'</span>)</span><br><span class="line">print(data.shape) <span class="comment"># (77431, 7)</span></span><br><span class="line"> </span><br><span class="line">data = np.ndfromtxt(<span class="string">'stockholm_td_adj.dat'</span>)</span><br><span class="line">print(data.shape) <span class="comment"># (77431, 7)</span></span><br><span class="line"> </span><br><span class="line">data = np.recfromtxt(<span class="string">'stockholm_td_adj.dat'</span>)</span><br><span class="line">print(data.shape) <span class="comment"># (77431, )</span></span><br></pre></td></tr></table></figure>
<p>使用 numpy.savetxt 我们可以将 Numpy 数组保存到csv文件中:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">M = random.rand(<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line">M</span><br><span class="line">å</span><br><span class="line">=&gt; array([[ 0.70506801,  0.54618952,  0.31039856],</span><br><span class="line">          [ <span class="number">0.26640475</span>,  <span class="number">0.10358152</span>,  <span class="number">0.73231132</span>],</span><br><span class="line">          [ <span class="number">0.07987128</span>,  <span class="number">0.34462854</span>,  <span class="number">0.91114433</span>]])</span><br><span class="line"></span><br><span class="line">savetxt(<span class="string">"random-matrix.csv"</span>, M)</span><br><span class="line"></span><br><span class="line">!cat random-matrix.csv</span><br><span class="line"></span><br><span class="line">=&gt; 7.050680113576863750e-01 5.461895177867910345e-01 3.103985627238065037e-01</span><br><span class="line">   <span class="number">2.664047486311884594e-01</span> <span class="number">1.035815249084012235e-01</span> <span class="number">7.323113219935466489e-01</span></span><br><span class="line">   <span class="number">7.987128326702574999e-02</span> <span class="number">3.446285401590922781e-01</span> <span class="number">9.111443300153220237e-01</span></span><br><span class="line"></span><br><span class="line">savetxt(<span class="string">"random-matrix.csv"</span>, M, fmt=<span class="string">'%.5f'</span>) <span class="comment"># fmt specifies the format</span></span><br><span class="line"></span><br><span class="line">!cat random-matrix.csv</span><br><span class="line"></span><br><span class="line">=&gt; 0.70507 0.54619 0.31040</span><br><span class="line">   <span class="number">0.26640</span> <span class="number">0.10358</span> <span class="number">0.73231</span></span><br><span class="line">   <span class="number">0.07987</span> <span class="number">0.34463</span> <span class="number">0.91114</span></span><br></pre></td></tr></table></figure>
<h4 id="2-12-2-Numpy-原生文件类型"><a href="#2-12-2-Numpy-原生文件类型" class="headerlink" title="2.12.2 Numpy 原生文件类型"></a>2.12.2 Numpy 原生文件类型</h4><p>使用 numpy.save 与 numpy.load 保存和读取：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">save(<span class="string">"random-matrix.npy"</span>, M)</span><br><span class="line"></span><br><span class="line">!file random-matrix.npy</span><br><span class="line"></span><br><span class="line">=&gt; random-matrix.npy: data</span><br><span class="line"></span><br><span class="line">load(<span class="string">"random-matrix.npy"</span>)</span><br><span class="line"></span><br><span class="line">=&gt; array([[ 0.70506801,  0.54618952,  0.31039856],</span><br><span class="line">          [ <span class="number">0.26640475</span>,  <span class="number">0.10358152</span>,  <span class="number">0.73231132</span>],</span><br><span class="line">          [ <span class="number">0.07987128</span>,  <span class="number">0.34462854</span>,  <span class="number">0.91114433</span>]])</span><br></pre></td></tr></table></figure>
<h2 id="3、ndarray-数组属性"><a href="#3、ndarray-数组属性" class="headerlink" title="3、ndarray 数组属性"></a>3、ndarray 数组属性</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.array([[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]],[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]],[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]]])</span><br><span class="line">print(a)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[[1 2 3]</span></span><br><span class="line"><span class="string">  [1 2 3]</span></span><br><span class="line"><span class="string">  [1 2 3]]</span></span><br><span class="line"><span class="string"> [[1 2 3]</span></span><br><span class="line"><span class="string">  [1 2 3]</span></span><br><span class="line"><span class="string">  [1 2 3]]</span></span><br><span class="line"><span class="string"> [[1 2 3]</span></span><br><span class="line"><span class="string">  [1 2 3]</span></span><br><span class="line"><span class="string">  [1 2 3]]]</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>ndarray 多维数组支持下面这些属性：</p>
<h3 id="3-1-ndarray-T"><a href="#3-1-ndarray-T" class="headerlink" title="3.1 ndarray.T"></a>3.1 ndarray.T</h3><p>ndarray.T用于数组的转置，与 .transpose() 相同。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a.T</span><br></pre></td></tr></table></figure>
<h3 id="3-2-ndarray-dtype"><a href="#3-2-ndarray-dtype" class="headerlink" title="3.2 ndarray.dtype"></a>3.2 ndarray.dtype</h3><p>ndarray.dtype 用来输出数组包含元素的数据类型。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a.dtype</span><br></pre></td></tr></table></figure>
<h3 id="3-3-ndarray-imag"><a href="#3-3-ndarray-imag" class="headerlink" title="3.3 ndarray.imag"></a>3.3 ndarray.imag</h3><p>ndarray.imag 用来输出数组包含元素的虚部。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.array([[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]],[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]],[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]]])</span><br><span class="line"></span><br><span class="line">print(a.imag)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[[0 0 0]</span></span><br><span class="line"><span class="string">  [0 0 0]</span></span><br><span class="line"><span class="string">  [0 0 0]]</span></span><br><span class="line"><span class="string"> [[0 0 0]</span></span><br><span class="line"><span class="string">  [0 0 0]</span></span><br><span class="line"><span class="string">  [0 0 0]]</span></span><br><span class="line"><span class="string"> [[0 0 0]</span></span><br><span class="line"><span class="string">  [0 0 0]</span></span><br><span class="line"><span class="string">  [0 0 0]]]</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<h3 id="3-4ndarray-real"><a href="#3-4ndarray-real" class="headerlink" title="3.4ndarray.real"></a>3.4ndarray.real</h3><p>ndarray.real用来输出数组包含元素的实部。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a.real</span><br></pre></td></tr></table></figure>
<h3 id="3-5-ndarray-size"><a href="#3-5-ndarray-size" class="headerlink" title="3.5 ndarray.size"></a>3.5 ndarray.size</h3><p>ndarray.size用来输出数组中的总包含元素数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a.size</span><br></pre></td></tr></table></figure>
<h3 id="3-6ndarray-itemsize"><a href="#3-6ndarray-itemsize" class="headerlink" title="3.6ndarray.itemsize"></a>3.6ndarray.itemsize</h3><p>ndarray.itemsize输出一个数组元素的字节数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a.itemsize <span class="comment"># 8</span></span><br></pre></td></tr></table></figure>
<h3 id="3-7-ndarray-nbytes"><a href="#3-7-ndarray-nbytes" class="headerlink" title="3.7 ndarray.nbytes"></a>3.7 ndarray.nbytes</h3><p>ndarray.nbytes用来输出数组的元素总字节数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a.nbytes <span class="comment"># 216=8*3*3*3</span></span><br></pre></td></tr></table></figure>
<h3 id="3-8-ndarray-ndim"><a href="#3-8-ndarray-ndim" class="headerlink" title="3.8 ndarray.ndim"></a>3.8 ndarray.ndim</h3><p>ndarray.ndim用来输出数组尺寸。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a.ndim <span class="comment"># 3</span></span><br></pre></td></tr></table></figure>
<h3 id="3-9-ndarray-shape"><a href="#3-9-ndarray-shape" class="headerlink" title="3.9 ndarray.shape"></a>3.9 ndarray.shape</h3><p>ndarray.shape用来输出数组维数组.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a.shape <span class="comment"># （3,3,3）</span></span><br></pre></td></tr></table></figure>
<h3 id="3-10-ndarray-strides"><a href="#3-10-ndarray-strides" class="headerlink" title="3.10 ndarray.strides"></a>3.10 ndarray.strides</h3><p>ndarray.strides用来遍历数组时，输出每个维度中步进的字节数组。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a.strides <span class="comment"># （72,24,8）</span></span><br></pre></td></tr></table></figure>
<h2 id="4、Numpy-数组的基本操作"><a href="#4、Numpy-数组的基本操作" class="headerlink" title="4、Numpy 数组的基本操作"></a>4、Numpy 数组的基本操作</h2><h3 id="4-1-重设形状"><a href="#4-1-重设形状" class="headerlink" title="4.1 重设形状"></a>4.1 重设形状</h3><p>reshape 可以在不改变数组数据的同时，改变数组的形状。其中，numpy.reshape() 等效于 ndarray.reshape()。reshape方法非常简单：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.reshape(a, newshape)</span><br></pre></td></tr></table></figure>
<p>其中，a 表示原数组，newshape 用于指定新的形状(整数或者元组)。</p>
<p>举个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">print(np.arange(<span class="number">10</span>).reshape((<span class="number">5</span>, <span class="number">2</span>)))</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[0 1]</span></span><br><span class="line"><span class="string"> [2 3]</span></span><br><span class="line"><span class="string"> [4 5]</span></span><br><span class="line"><span class="string"> [6 7]</span></span><br><span class="line"><span class="string"> [8 9]]</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<h3 id="4-2-数组展开"><a href="#4-2-数组展开" class="headerlink" title="4.2 数组展开"></a>4.2 数组展开</h3><p>ravel 的目的是将任意形状的数组扁平化，变为 1 维数组。ravel 方法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.ravel(a, order=<span class="string">'C'</span>)</span><br></pre></td></tr></table></figure>
<p>其中，a 表示需要处理的数组。order 表示变换时的读取顺序，默认是按照行依次读取，当 order=’F’ 时，可以按列依次读取排序。</p>
<p>示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.arange(<span class="number">10</span>).reshape((<span class="number">2</span>, <span class="number">5</span>))</span><br><span class="line">print(a)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[0 1 2 3 4]</span></span><br><span class="line"><span class="string"> [5 6 7 8 9]]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(np.ravel(a)) <span class="comment"># [0 1 2 3 4 5 6 7 8 9]</span></span><br><span class="line">print(np.ravel(a, order=<span class="string">'F'</span>)) <span class="comment"># [0 5 1 6 2 7 3 8 4 9]</span></span><br><span class="line"></span><br><span class="line">print(a.flatten()) <span class="comment"># [0 1 2 3 4 5 6 7 8 9]</span></span><br></pre></td></tr></table></figure>
<h3 id="4-3-轴移动"><a href="#4-3-轴移动" class="headerlink" title="4.3 轴移动"></a>4.3 轴移动</h3><p>moveaxis 可以将数组的轴移动到新的位置。其方法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.moveaxis(a, source, destination)</span><br></pre></td></tr></table></figure>
<p>其中：</p>
<ul>
<li>a：数组。</li>
<li>source：要移动的轴的原始位置。</li>
<li>destination：要移动的轴的目标位置。</li>
</ul>
<p>举个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.ones((<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)) <span class="comment"># (1,2,3)</span></span><br><span class="line">print(a)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[[ 1.  1.  1.]</span></span><br><span class="line"><span class="string">  [ 1.  1.  1.]]]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">b=np.moveaxis(a, <span class="number">0</span>, <span class="number">-1</span>) <span class="comment"># 等价于 a.transpose((1,2,0))</span></span><br><span class="line">print(b)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[[ 1.]</span></span><br><span class="line"><span class="string">  [ 1.]</span></span><br><span class="line"><span class="string">  [ 1.]]</span></span><br><span class="line"><span class="string"> [[ 1.]</span></span><br><span class="line"><span class="string">  [ 1.]</span></span><br><span class="line"><span class="string">  [ 1.]]]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(b.shape) <span class="comment"># (2, 3, 1)</span></span><br><span class="line"></span><br><span class="line">c=a.transpose((<span class="number">1</span>,<span class="number">2</span>,<span class="number">0</span>))</span><br><span class="line">print(c)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[[ 1.]</span></span><br><span class="line"><span class="string">  [ 1.]</span></span><br><span class="line"><span class="string">  [ 1.]]</span></span><br><span class="line"><span class="string"> [[ 1.]</span></span><br><span class="line"><span class="string">  [ 1.]</span></span><br><span class="line"><span class="string">  [ 1.]]]</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<h3 id="4-4-轴交换"><a href="#4-4-轴交换" class="headerlink" title="4.4 轴交换"></a>4.4 轴交换</h3><p>和 moveaxis 不同的是，swapaxes 可以用来交换数组的轴。其方法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.swapaxes(a, axis1, axis2)</span><br></pre></td></tr></table></figure>
<p>其中：</p>
<ul>
<li>a：数组。</li>
<li>axis1：需要交换的轴 1 位置。</li>
<li>axis2：需要与轴 1 交换位置的轴 1 位置。</li>
</ul>
<p>举个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"> </span><br><span class="line">a = np.ones((<span class="number">1</span>, <span class="number">4</span>, <span class="number">3</span>)) <span class="comment"># (1,4,3)</span></span><br><span class="line">print(a)</span><br><span class="line">b=np.swapaxes(a, <span class="number">0</span>, <span class="number">2</span>) <span class="comment"># (3,4,1) 等价于 np.transpose(a,(2,1,0)) 和 np.moveaxis(np.moveaxis(a,0,-1),0,1)</span></span><br><span class="line">print(b)</span><br></pre></td></tr></table></figure>
<h3 id="4-5-数组转置"><a href="#4-5-数组转置" class="headerlink" title="4.5 数组转置"></a>4.5 数组转置</h3><p>transpose 类似于矩阵的转置，它可以将 2 维数组的横轴和纵轴交换。其方法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.transpose(a, axes=<span class="keyword">None</span>)</span><br></pre></td></tr></table></figure>
<p>其中：</p>
<ul>
<li>a：数组。</li>
<li>axis：该值默认为 none，表示转置。如果有值，那么则按照值替换轴。</li>
</ul>
<p>举个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.arange(<span class="number">4</span>).reshape(<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">print(a)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[0 1]</span></span><br><span class="line"><span class="string"> [2 3]]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(np.transpose(a)) <span class="comment"># 等价于np.transpose(a,(1,0))</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[0 2]</span></span><br><span class="line"><span class="string"> [1 3]]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.arange(<span class="number">8</span>).reshape(<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">print(a[:,<span class="number">0</span>,:],a[:,<span class="number">1</span>,:])</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[0 1]</span></span><br><span class="line"><span class="string"> [4 5]] [[2 3]</span></span><br><span class="line"><span class="string"> [6 7]]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">c = np.transpose(a,(<span class="number">1</span>,<span class="number">0</span>,<span class="number">2</span>))</span><br><span class="line">print(c[<span class="number">0</span>,:,:],c[<span class="number">1</span>,:,:])</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[0 1]</span></span><br><span class="line"><span class="string"> [4 5]] [[2 3]</span></span><br><span class="line"><span class="string"> [6 7]]</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<h3 id="4-6-维度改变"><a href="#4-6-维度改变" class="headerlink" title="4.6 维度改变"></a>4.6 维度改变</h3><p>atleast_xd 支持将输入数据直接视为 x维。这里的 x 可以表示：1，2，3。方法分别维：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">numpy.atleast_1d()</span><br><span class="line">numpy.atleast_2d()</span><br><span class="line">numpy.atleast_3d()</span><br></pre></td></tr></table></figure>
<p>举个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">print(np.atleast_1d(a)) <span class="comment"># [1 2 3 4]</span></span><br><span class="line">print(np.atleast_2d(a)) <span class="comment"># [[1 2 3 4]]</span></span><br><span class="line">print(np.atleast_3d(a))</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[[1]</span></span><br><span class="line"><span class="string">  [2]</span></span><br><span class="line"><span class="string">  [3]</span></span><br><span class="line"><span class="string">  [4]]]</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<h3 id="4-7-类型转变"><a href="#4-7-类型转变" class="headerlink" title="4.7 类型转变"></a>4.7 类型转变</h3><p>在 numpy 中，还有一系列以 as 开头的方法，它们可以将特定输入转换为数组，亦可将数组转换为矩阵、标量，ndarray等。如下：</p>
<ol>
<li>asarray(a，dtype，order)：将特定输入转换为数组。</li>
<li>asanyarray(a，dtype，order)：将特定输入转换为 ndarray。</li>
<li>asmatrix(data，dtype)：将特定输入转换为矩阵。</li>
<li>asfarray(a，dtype)：将特定输入转换为 float 类型的数组。</li>
<li>asarray_chkfinite(a，dtype，order)：将特定输入转换为数组，检查 NaN 或 infs。</li>
<li>asscalar(a)：将大小为 1 的数组转换为标量。</li>
</ol>
<p>这里以 asmatrix(data，dtype) 方法举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.arange(<span class="number">4</span>).reshape(<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">np.asmatrix(a)</span><br></pre></td></tr></table></figure>
<h3 id="4-8-数组连接"><a href="#4-8-数组连接" class="headerlink" title="4.8 数组连接"></a>4.8 数组连接</h3><p>concatenate 可以将多个数组沿指定轴连接在一起。其方法为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.concatenate((a1, a2, ...), axis=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p>其中：</p>
<ul>
<li>(a1, a2, …)：需要连接的数组。</li>
<li>axis：指定连接轴。</li>
</ul>
<p>举个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.array([[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>]]) <span class="comment"># (3,2)</span></span><br><span class="line">b = np.array([[<span class="number">7</span>, <span class="number">8</span>], [<span class="number">9</span>, <span class="number">10</span>]]) <span class="comment"># (2,2)</span></span><br><span class="line">c = np.array([[<span class="number">11</span>, <span class="number">12</span>]]) <span class="comment"># (1,2)</span></span><br><span class="line"></span><br><span class="line">d=np.concatenate((a, b, c), axis=<span class="number">0</span>) <span class="comment"># axis=0 按第1维 连接</span></span><br><span class="line">print(d.shape) <span class="comment"># (6, 2)</span></span><br></pre></td></tr></table></figure>
<p>这里，我们可以尝试沿着横轴连接。但要保证连接处的维数一致，所以这里用到了 .T 转置。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.array([[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>]]) <span class="comment"># (3,2)</span></span><br><span class="line">b = np.array([[<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]) <span class="comment"># (1,3)</span></span><br><span class="line"></span><br><span class="line">print(np.concatenate((a, b.T), axis=<span class="number">1</span>).shape) <span class="comment"># (3,3)</span></span><br></pre></td></tr></table></figure>
<h3 id="4-9-数组堆叠"><a href="#4-9-数组堆叠" class="headerlink" title="4.9 数组堆叠"></a>4.9 数组堆叠</h3><p>在 numpy 中，还有一系列以 as 开头的方法，它们可以将特定输入转换为数组，亦可将数组转换为矩阵、标量，ndarray等。如下：</p>
<ol>
<li>stack(arrays，axis)：沿着新轴连接数组的序列。</li>
<li>column_stack()：将 1 维数组作为列堆叠到 2 维数组中。</li>
<li>hstack()：按水平方向堆叠数组。</li>
<li>vstack()：按垂直方向堆叠数组。</li>
<li>dstack()：按深度方向堆叠数组。</li>
</ol>
<p>这里以 stack(arrays，axis) 方法举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">b = np.array([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line">print(np.stack((a, b),axis=<span class="number">0</span>))</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[1 2 3]</span></span><br><span class="line"><span class="string"> [4 5 6]]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(np.column_stack((a,b)))</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[1 4]</span></span><br><span class="line"><span class="string"> [2 5]</span></span><br><span class="line"><span class="string"> [3 6]]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(np.hstack((a,b))) <span class="comment"># [1 2 3 4 5 6]</span></span><br><span class="line">print(np.vstack((a,b)))</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[1 2 3]</span></span><br><span class="line"><span class="string"> [4 5 6]]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(np.dstack((a,b)))</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[[1 4]</span></span><br><span class="line"><span class="string">  [2 5]</span></span><br><span class="line"><span class="string">  [3 6]]]</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p><strong>tile 与 repeat</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">a = array([[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]])</span><br><span class="line"><span class="comment"># repeat each element 3 times</span></span><br><span class="line">repeat(a, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">=&gt; array([1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4, 4])</span><br><span class="line"></span><br><span class="line"><span class="comment"># tile the matrix 3 times</span></span><br><span class="line">tile(a, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">=&gt; array([[1, 2, 1, 2, 1, 2],</span><br><span class="line">          [<span class="number">3</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">4</span>]])</span><br></pre></td></tr></table></figure>
<h3 id="4-10-拆分"><a href="#4-10-拆分" class="headerlink" title="4.10 拆分"></a>4.10 拆分</h3><p>split 及与之相似的一系列方法主要是用于数组的拆分，列举如下：</p>
<ol>
<li>split(ary，indices_or_sections，axis)：将数组拆分为多个子数组。</li>
<li>dsplit(ary，indices_or_sections)：按深度方向将数组拆分成多个子数组。</li>
<li>hsplit(ary，indices_or_sections)：按水平方向将数组拆分成多个子数组。</li>
<li>vsplit(ary，indices_or_sections)：按垂直方向将数组拆分成多个子数组。</li>
</ol>
<p>下面，我们看一看 split 到底有什么效果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.arange(<span class="number">6</span>).reshape(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[0 1 2]</span></span><br><span class="line"><span class="string"> [3 4 5]]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(np.split(a, <span class="number">3</span>,axis=<span class="number">1</span>))</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[array([[0],</span></span><br><span class="line"><span class="string">       [3]]), array([[1],</span></span><br><span class="line"><span class="string">       [4]]), array([[2],</span></span><br><span class="line"><span class="string">       [5]])]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(np.split(a, <span class="number">2</span>,axis=<span class="number">0</span>))</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[array([[0, 1, 2]]), array([[3, 4, 5]])]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(np.hsplit(a,<span class="number">3</span>))</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[array([[0],</span></span><br><span class="line"><span class="string">       [3]]), array([[1],</span></span><br><span class="line"><span class="string">       [4]]), array([[2],</span></span><br><span class="line"><span class="string">       [5]])]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(np.vsplit(a,<span class="number">2</span>))</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[array([[0, 1, 2]]), array([[3, 4, 5]])]</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>numpy 中还有针对数组元素添加或移除的一些方法。</p>
<h3 id="4-11-删除"><a href="#4-11-删除" class="headerlink" title="4.11 删除"></a>4.11 删除</h3><p>delete(arr，obj，axis)：沿特定轴删除数组中的子数组。<br>下面，依次对 4 种方法进行示例，首先是 delete 删除：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">print(a)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[ 0  1  2  3]</span></span><br><span class="line"><span class="string"> [ 4  5  6  7]</span></span><br><span class="line"><span class="string"> [ 8  9 10 11]]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(np.delete(a, <span class="number">2</span>, <span class="number">1</span>)) <span class="comment"># 将第 3 列(索引 2)删除</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[ 0  1  3]</span></span><br><span class="line"><span class="string"> [ 4  5  7]</span></span><br><span class="line"><span class="string"> [ 8  9 11]]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(np.delete(a, <span class="number">2</span>, <span class="number">0</span>)) <span class="comment"># 将第 3 行(索引 2)删除</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[0 1 2 3]</span></span><br><span class="line"><span class="string"> [4 5 6 7]]</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<h3 id="4-12-数组插入"><a href="#4-12-数组插入" class="headerlink" title="4.12 数组插入"></a>4.12 数组插入</h3><p>insert(arr，obj，values，axis)：依据索引在特定轴之前插入值。<br>再看一看 insert插入, 用法和 delete 很相似，只是需要在第三个参数位置设置需要插入的数组对象：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">b = np.arange(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">print(np.insert(a, <span class="number">2</span>, b, <span class="number">0</span>)) <span class="comment"># axis=0 按行插入 obj=2 a的第3行，即将b插入到a的第3行位置</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[ 0  1  2  3]</span></span><br><span class="line"><span class="string"> [ 4  5  6  7]</span></span><br><span class="line"><span class="string"> [ 0  1  2  3]</span></span><br><span class="line"><span class="string"> [ 8  9 10 11]]</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<h3 id="4-13-附加"><a href="#4-13-附加" class="headerlink" title="4.13 附加"></a>4.13 附加</h3><p>append(arr，values，axis)：将值附加到数组的末尾，并返回 1 维数组。<br>append 的用法也非常简单。只需要设置好需要附加的值和轴位置就好了。它其实相当于只能在末尾插入的 insert，所以少了一个指定索引的参数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.arange(<span class="number">6</span>).reshape(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">b = np.arange(<span class="number">3</span>).reshape(<span class="number">1</span>,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">print(np.append(a, b)) <span class="comment"># [0 1 2 3 4 5 0 1 2]</span></span><br><span class="line"></span><br><span class="line">print(np.append(a, b,axis=<span class="number">0</span>))</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[0 1 2]</span></span><br><span class="line"><span class="string"> [3 4 5]</span></span><br><span class="line"><span class="string"> [0 1 2]]</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<h3 id="4-14-重设尺寸"><a href="#4-14-重设尺寸" class="headerlink" title="4.14 重设尺寸"></a>4.14 重设尺寸</h3><p>resize(a，new_shape)：对数组尺寸进行重新设定。<br>resize 就很好理解了，直接举例子吧：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.arange(<span class="number">10</span>)</span><br><span class="line">print(a.reshape((<span class="number">2</span>,<span class="number">5</span>)))</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[0 1 2 3 4]</span></span><br><span class="line"><span class="string"> [5 6 7 8 9]]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(a)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[0 1 2 3 4 5 6 7 8 9]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">a.resize((<span class="number">2</span>,<span class="number">5</span>))</span><br><span class="line">print(a)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[0 1 2 3 4]</span></span><br><span class="line"><span class="string"> [5 6 7 8 9]]</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>你可能会纳闷了，这个 resize 看起来和上面的 reshape 一样呢，都是改变数组原有的形状。</p>
<p>其实，它们直接是有区别的，区别在于对原数组的影响。reshape 在改变形状时，不会影响原数组，相当于对原数组做了一份拷贝。而 resize 则是对原数组执行操作。</p>
<h3 id="4-15-翻转数组"><a href="#4-15-翻转数组" class="headerlink" title="4.15 翻转数组"></a>4.15 翻转数组</h3><p>在 numpy 中，我们还可以对数组进行翻转操作：</p>
<ol>
<li>fliplr(m)：左右翻转数组。</li>
<li>flipud(m)：上下翻转数组。</li>
</ol>
<p>举个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.arange(<span class="number">6</span>).reshape(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">print(a)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[0 1 2]</span></span><br><span class="line"><span class="string"> [3 4 5]]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(np.fliplr(a))</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[2 1 0]</span></span><br><span class="line"><span class="string"> [5 4 3]]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(np.flipud(a))</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[3 4 5]</span></span><br><span class="line"><span class="string"> [0 1 2]]</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<h3 id="4-16-增加一个新维度-newaxis"><a href="#4-16-增加一个新维度-newaxis" class="headerlink" title="4.16 增加一个新维度: newaxis"></a>4.16 增加一个新维度: newaxis</h3><p>newaxis 可以帮助我们为数组增加一个新维度，比如说，将一个向量转换成列矩阵和行矩阵：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">v = np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">shape(v)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">=&gt; (3,)</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="comment"># make a column matrix of the vector v</span></span><br><span class="line">v[:, newaxis]</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">=&gt; array([[1],</span></span><br><span class="line"><span class="string">          [2],</span></span><br><span class="line"><span class="string">          [3]])</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="comment"># column matrix</span></span><br><span class="line">v[:,newaxis].shape</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">=&gt; (3, 1)</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="comment"># row matrix</span></span><br><span class="line">v[newaxis,:].shape</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">=&gt; (1, 3)</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<h2 id="5、Numpy-随机抽样"><a href="#5、Numpy-随机抽样" class="headerlink" title="5、Numpy 随机抽样"></a>5、Numpy 随机抽样</h2><p>Numpy 的随机抽样功能非常强大，主要由 numpy.random 模块完成。</p>
<p>首先，我们需要了解如何使用 numpy 也就是生成一些满足基本需求的随机数据。主要由以下一些方法完成：</p>
<h3 id="5-1-numpy-random-rand"><a href="#5-1-numpy-random-rand" class="headerlink" title="5.1 numpy.random.rand"></a>5.1 numpy.random.rand</h3><p>numpy.random.rand(d0, d1, …, dn) 方法的作用为：指定一个数组，并使用[0, 1) 区间随机数据填充，这些数据均匀分布。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">np.random.rand(<span class="number">2</span>,<span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<h3 id="5-2-numpy-random-randn"><a href="#5-2-numpy-random-randn" class="headerlink" title="5.2 numpy.random.randn"></a>5.2 numpy.random.randn</h3><p>numpy.random.randn(d0, d1, …, dn) 与 numpy.random.rand(d0, d1, …, dn) 的区别在于，返回的随机数据符合标准正太分布。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">np.random.randn(<span class="number">1</span>,<span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<h3 id="5-3-numpy-random-randint"><a href="#5-3-numpy-random-randint" class="headerlink" title="5.3 numpy.random.randint"></a>5.3 numpy.random.randint</h3><p>randint(low, high, size, dtype) 方法将会生成 [low, high) 的随机整数。注意这是一个半开半闭区间。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">print(np.random.randint(<span class="number">2</span>,<span class="number">5</span>,<span class="number">10</span>)) <span class="comment"># [4 4 3 3 3 2 2 4 4 2]</span></span><br></pre></td></tr></table></figure>
<h3 id="5-4-numpy-random-random-integers"><a href="#5-4-numpy-random-random-integers" class="headerlink" title="5.4 numpy.random.random_integers"></a>5.4 numpy.random.random_integers</h3><p>random_integers(low, high, size) 方法将会生成 [low, high] 的 np.int 类型随机整数。注</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"> </span><br><span class="line">print(np.random.random_integers(<span class="number">2</span>,<span class="number">5</span>,<span class="number">10</span>)) <span class="comment"># [3 2 5 2 3 2 3 3 2 5]</span></span><br></pre></td></tr></table></figure>
<h3 id="5-5-numpy-random-random-sample"><a href="#5-5-numpy-random-random-sample" class="headerlink" title="5.5 numpy.random.random_sample"></a>5.5 numpy.random.random_sample</h3><p>random_sample(size) 方法将会在 [0, 1) 区间内生成指定 size 的随机浮点数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></table></figure>
<p>np.random.random_sample([10])<br>与 numpy.random.random_sample 类似的方法还有：</p>
<ul>
<li>numpy.random.random([size])</li>
<li>numpy.random.ranf([size])</li>
<li>numpy.random.sample([size])</li>
</ul>
<p>它们 4 个的效果都差不多。</p>
<h3 id="5-6-numpy-random-choice"><a href="#5-6-numpy-random-choice" class="headerlink" title="5.6 numpy.random.choice"></a>5.6 numpy.random.choice</h3><p>choice(a, size, replace, p) 方法将会给定的 1 维数组里生成随机数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">np.random.choice(<span class="number">10</span>,<span class="number">5</span>) <span class="comment"># 将会在 np.arange(10) 中生成 5 个随机数</span></span><br></pre></td></tr></table></figure>
<h3 id="5-7-概率密度分布"><a href="#5-7-概率密度分布" class="headerlink" title="5.7 概率密度分布"></a>5.7 概率密度分布</h3><p>除了上面介绍的 6 中随机数生成方法，numpy 还提供了大量的满足特定概率密度分布的样本生成方法。它们的使用方法和上面非常相似，这里就不再一一介绍了。列举如下：</p>
<ol>
<li>numpy.random.beta(a，b，size)：从 Beta 分布中生成随机数。</li>
<li>numpy.random.binomial(n, p, size)：从二项分布中生成随机数。</li>
<li>numpy.random.chisquare(df，size)：从卡方分布中生成随机数。</li>
<li>numpy.random.dirichlet(alpha，size)：从 Dirichlet 分布中生成随机数。</li>
<li>numpy.random.exponential(scale，size)：从指数分布中生成随机数。</li>
<li>numpy.random.f(dfnum，dfden，size)：从 F 分布中生成随机数。</li>
<li>numpy.random.gamma(shape，scale，size)：从 Gamma 分布中生成随机数。</li>
<li>numpy.random.geometric(p，size)：从几何分布中生成随机数。</li>
<li>numpy.random.gumbel(loc，scale，size)：从 Gumbel 分布中生成随机数。</li>
<li>numpy.random.hypergeometric(ngood, nbad, nsample, size)：从超几何分布中生成随机数。</li>
<li>numpy.random.laplace(loc，scale，size)：从拉普拉斯双指数分布中生成随机数。</li>
<li>numpy.random.logistic(loc，scale，size)：从逻辑分布中生成随机数。</li>
<li>numpy.random.lognormal(mean，sigma，size)：从对数正态分布中生成随机数。</li>
<li>numpy.random.logseries(p，size)：从对数系列分布中生成随机数。</li>
<li>numpy.random.multinomial(n，pvals，size)：从多项分布中生成随机数。</li>
<li>numpy.random.multivariate_normal(mean, cov, size)：从多变量正态分布绘制随机样本。</li>
<li>numpy.random.negative_binomial(n, p, size)：从负二项分布中生成随机数。</li>
<li>numpy.random.noncentral_chisquare(df，nonc，size)：从非中心卡方分布中生成随机数。</li>
<li>numpy.random.noncentral_f(dfnum, dfden, nonc, size)：从非中心 F 分布中抽取样本。</li>
<li>numpy.random.normal(loc，scale，size)：从正态分布绘制随机样本。</li>
<li>numpy.random.pareto(a，size)：从具有指定形状的 Pareto II 或 Lomax 分布中生成随机数。</li>
<li>numpy.random.poisson(lam，size)：从泊松分布中生成随机数。</li>
<li>numpy.random.power(a，size)：从具有正指数 a-1 的功率分布中在 0，1 中生成随机数。</li>
<li>numpy.random.rayleigh(scale，size)：从瑞利分布中生成随机数。</li>
<li>numpy.random.standard_cauchy(size)：从标准 Cauchy 分布中生成随机数。</li>
<li>numpy.random.standard_exponential(size)：从标准指数分布中生成随机数。</li>
<li>numpy.random.standard_gamma(shape，size)：从标准 Gamma 分布中生成随机数。</li>
<li>numpy.random.standard_normal(size)：从标准正态分布中生成随机数。</li>
<li>numpy.random.standard_t(df，size)：从具有 df 自由度的标准学生 t 分布中生成随机数。</li>
<li>numpy.random.triangular(left，mode，right，size)：从三角分布中生成随机数。</li>
<li>numpy.random.uniform(low，high，size)：从均匀分布中生成随机数。</li>
<li>numpy.random.vonmises(mu，kappa，size)：从 von Mises 分布中生成随机数。</li>
<li>numpy.random.wald(mean，scale，size)：从 Wald 或反高斯分布中生成随机数。</li>
<li>numpy.random.weibull(a，size)：从威布尔分布中生成随机数。</li>
<li>numpy.random.zipf(a，size)：从 Zipf 分布中生成随机数。</li>
</ol>
<h2 id="6、数学函数"><a href="#6、数学函数" class="headerlink" title="6、数学函数"></a>6、数学函数</h2><h3 id="6-1-三角函数"><a href="#6-1-三角函数" class="headerlink" title="6.1 三角函数"></a>6.1 三角函数</h3><p>首先, 看一看 numpy 提供的三角函数功能。这些方法有：</p>
<ol>
<li>numpy.sin(x)：三角正弦。</li>
<li>numpy.cos(x)：三角余弦。</li>
<li>numpy.tan(x)：三角正切。</li>
<li>numpy.arcsin(x)：三角反正弦。</li>
<li>numpy.arccos(x)：三角反余弦。</li>
<li>numpy.arctan(x)：三角反正切。</li>
<li>numpy.hypot(x1,x2)：直角三角形求斜边。</li>
<li>numpy.degrees(x)：弧度转换为度。</li>
<li>numpy.radians(x)：度转换为弧度。</li>
<li>numpy.deg2rad(x)：度转换为弧度。</li>
<li>numpy.rad2deg(x)：弧度转换为度。</li>
</ol>
<p>比如，我们可以用上面提到的 numpy.rad2deg(x) 将弧度转换为度。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">print(np.rad2deg(np.pi)) <span class="comment"># 180.0</span></span><br></pre></td></tr></table></figure>
<h3 id="6-2-双曲函数"><a href="#6-2-双曲函数" class="headerlink" title="6.2 双曲函数"></a>6.2 双曲函数</h3><p>在数学中，双曲函数是一类与常见的三角函数类似的函数。双曲函数经常出现于某些重要的线性微分方程的解中，使用 numpy 计算它们的方法为：</p>
<ol>
<li>numpy.sinh(x)：双曲正弦。</li>
<li>numpy.cosh(x)：双曲余弦。</li>
<li>numpy.tanh(x)：双曲正切。</li>
<li>numpy.arcsinh(x)：反双曲正弦。</li>
<li>numpy.arccosh(x)：反双曲余弦。</li>
<li>numpy.arctanh(x)：反双曲正切。</li>
</ol>
<h3 id="6-3-数值修约"><a href="#6-3-数值修约" class="headerlink" title="6.3 数值修约"></a>6.3 数值修约</h3><p>数值修约, 又称数字修约, 是指在进行具体的数字运算前, 按照一定的规则确定一致的位数, 然后舍去某些数字后面多余的尾数的过程[via. 维基百科]。比如, 我们常听到的「4 舍 5 入」就属于数值修约中的一种。</p>
<ol>
<li>numpy.around(a)：平均到给定的小数位数。</li>
<li>numpy.round_(a)：将数组舍入到给定的小数位数。</li>
<li>numpy.rint(x)：修约到最接近的整数。</li>
<li>numpy.fix(x, y)：向 0 舍入到最接近的整数。</li>
<li>numpy.floor(x)：返回输入的底部(标量 x 的底部是最大的整数 i)。</li>
<li>numpy.ceil(x)：返回输入的上限(标量 x 的底部是最小的整数 i).</li>
<li>numpy.trunc(x)：返回输入的截断值。</li>
</ol>
<p>随机选择几个浮点数，看一看上面方法的区别。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.array([<span class="number">1.21</span>, <span class="number">2.53</span>, <span class="number">3.86</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([ <span class="number">1.21</span>,  <span class="number">2.53</span>,  <span class="number">3.86</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.around(a)</span><br><span class="line">array([ <span class="number">1.</span>,  <span class="number">3.</span>,  <span class="number">4.</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.round_(a)</span><br><span class="line">array([ <span class="number">1.</span>,  <span class="number">3.</span>,  <span class="number">4.</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.rint(a)</span><br><span class="line">array([ <span class="number">1.</span>,  <span class="number">3.</span>,  <span class="number">4.</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.fix(a)</span><br><span class="line">array([ <span class="number">1.</span>,  <span class="number">2.</span>,  <span class="number">3.</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.floor(a)</span><br><span class="line">array([ <span class="number">1.</span>,  <span class="number">2.</span>,  <span class="number">3.</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.ceil(a)</span><br><span class="line">array([ <span class="number">2.</span>,  <span class="number">3.</span>,  <span class="number">4.</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.trunc(a)</span><br><span class="line">array([ <span class="number">1.</span>,  <span class="number">2.</span>,  <span class="number">3.</span>])</span><br></pre></td></tr></table></figure>
<h3 id="6-4-求和、求积、差分"><a href="#6-4-求和、求积、差分" class="headerlink" title="6.4 求和、求积、差分"></a>6.4 求和、求积、差分</h3><p>下面这些方法用于数组内元素或数组间进行求和、求积以及进行差分。</p>
<ol>
<li>numpy.prod(a, axis, dtype, keepdims)：返回指定轴上的数组元素的乘积。</li>
<li>numpy.sum(a, axis, dtype, keepdims)：返回指定轴上的数组元素的总和。</li>
<li>numpy.nanprod(a, axis, dtype, keepdims)：返回指定轴上的数组元素的乘积, 将 NaN 视作 1。</li>
<li>numpy.nansum(a, axis, dtype, keepdims)：返回指定轴上的数组元素的总和, 将 NaN 视作 0。</li>
<li>numpy.cumprod(a, axis, dtype)：返回沿给定轴的元素的累积乘积。</li>
<li>numpy.cumsum(a, axis, dtype)：返回沿给定轴的元素的累积总和。</li>
<li>numpy.nancumprod(a, axis, dtype)：返回沿给定轴的元素的累积乘积, 将 NaN 视作 1。</li>
<li>numpy.nancumsum(a, axis, dtype)：返回沿给定轴的元素的累积总和, 将 NaN 视作 0。</li>
<li>numpy.diff(a, n, axis)：计算沿指定轴的第 n 个离散差分。</li>
<li>numpy.ediff1d(ary, to_end, to_begin)：数组的连续元素之间的差异。</li>
<li>numpy.gradient(f)：返回 N 维数组的梯度。</li>
<li>numpy.cross(a, b, axisa, axisb, axisc, axis)：返回两个(数组）向量的叉积。</li>
<li>numpy.trapz(y, x, dx, axis)：使用复合梯形规则沿给定轴积分。</li>
<li>numpy.trace(a, offset=0, axis1=0, axis2=1, dtype=None, out=None):  # 等价于 diag（a）.sum()</li>
</ol>
<p>下面，我们选取几个举例测试一下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.prod(a) <span class="comment"># 所有元素乘积</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sum(a) <span class="comment"># 所有元素和</span></span><br><span class="line"><span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.nanprod(a) <span class="comment"># 默认轴上所有元素乘积</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.nansum(a) <span class="comment"># 默认轴上所有元素和</span></span><br><span class="line"><span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.cumprod(a) <span class="comment"># 默认轴上元素的累积乘积。</span></span><br><span class="line">array([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.diff(a) <span class="comment"># 默认轴上元素差分。</span></span><br><span class="line">array([<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>])</span><br></pre></td></tr></table></figure>
<h3 id="6-5-指数和对数"><a href="#6-5-指数和对数" class="headerlink" title="6.5 指数和对数"></a>6.5 指数和对数</h3><p>如果你需要进行指数或者对数求解，可以用到以下这些方法。</p>
<ol>
<li>numpy.exp(x)：计算输入数组中所有元素的指数。</li>
<li>numpy.expm1(x)：对数组中的所有元素计算 exp(x） - 1.</li>
<li>numpy.exp2(x)：对于输入数组中的所有 p, 计算 2 ** p。</li>
<li>numpy.log(x)：计算自然对数。</li>
<li>numpy.log10(x)：计算常用对数。</li>
<li>numpy.log2(x)：计算二进制对数。</li>
<li>numpy.log1p(x)：log(1 + x)。</li>
<li>numpy.logaddexp(x1, x2)：log2(2<strong>x1 + 2</strong>x2)。</li>
<li>numpy.logaddexp2(x1, x2)：log(exp(x1) + exp(x2))。</li>
</ol>
<h3 id="6-6-算术运算"><a href="#6-6-算术运算" class="headerlink" title="6.6 算术运算"></a>6.6 算术运算</h3><p>当然，numpy 也提供了一些用于算术运算的方法，使用起来会比 python 提供的运算符灵活一些，主要是可以直接针对数组。</p>
<ol>
<li>numpy.add(x1, x2)：对应元素相加。</li>
<li>numpy.reciprocal(x)：求倒数 1/x。</li>
<li>numpy.negative(x)：求对应负数。</li>
<li>numpy.multiply(x1, x2)：求解乘法。</li>
<li>numpy.divide(x1, x2)：相除 x1/x2。</li>
<li>numpy.power(x1, x2)：类似于 x1^x2。</li>
<li>numpy.subtract(x1, x2)：减法。</li>
<li>numpy.fmod(x1, x2)：返回除法的元素余项。</li>
<li>numpy.mod(x1, x2)：返回余项。</li>
<li>numpy.modf(x1)：返回数组的小数和整数部分。</li>
<li>numpy.remainder(x1, x2)：返回除法余数。</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a1 = np.random.randint(<span class="number">0</span>, <span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a2 = np.random.randint(<span class="number">0</span>, <span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a1</span><br><span class="line">array([<span class="number">3</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">0</span>, <span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a2</span><br><span class="line">array([<span class="number">1</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.add(a1, a2)</span><br><span class="line">array([ <span class="number">4</span>, <span class="number">15</span>, <span class="number">14</span>,  <span class="number">4</span>,  <span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.reciprocal(a1)</span><br><span class="line">array([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, , ])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.negative(a1)</span><br><span class="line">array([<span class="number">-3</span>, <span class="number">-7</span>, <span class="number">-8</span>,  <span class="number">0</span>,  <span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.multiply(a1, a2)</span><br><span class="line">array([ <span class="number">3</span>, <span class="number">56</span>, <span class="number">48</span>,  <span class="number">0</span>,  <span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.divide(a1, a2)</span><br><span class="line">array([<span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.power(a1, a2)</span><br><span class="line">array([<span class="number">3</span>,<span class="number">5764801</span>,<span class="number">262144</span>,<span class="number">0</span>,<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.subtract(a1, a2)</span><br><span class="line">array([ <span class="number">2</span>, <span class="number">-1</span>,  <span class="number">2</span>, <span class="number">-4</span>, <span class="number">-4</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.fmod(a1, a2)</span><br><span class="line">array([<span class="number">0</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.mod(a1, a2)</span><br><span class="line">array([<span class="number">0</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.modf(a1)</span><br><span class="line">(array([ <span class="number">0.</span>,  <span class="number">0.</span>,  <span class="number">0.</span>,  <span class="number">0.</span>,  <span class="number">0.</span>]), array([ <span class="number">3.</span>,  <span class="number">7.</span>,  <span class="number">8.</span>,  <span class="number">0.</span>,  <span class="number">0.</span>]))</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.remainder(a1, a2)</span><br><span class="line">array([<span class="number">0</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>])</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>
<h3 id="6-7-矩阵和向量积"><a href="#6-7-矩阵和向量积" class="headerlink" title="6.7 矩阵和向量积"></a>6.7 矩阵和向量积</h3><p>求解向量、矩阵、张量的点积等同样是 numpy 非常强大的地方。</p>
<ol>
<li>numpy.dot(a,b)：求解两个数组的点积。</li>
<li>numpy.vdot(a,b)：求解两个向量的点积。</li>
<li>numpy.inner(a,b)：求解两个数组的内积。</li>
<li>numpy.outer(a,b)：求解两个向量的外积。</li>
<li>numpy.matmul(a,b)：求解两个数组的矩阵乘积。</li>
<li>numpy.tensordot(a,b)：求解张量点积。</li>
<li>numpy.kron(a,b)：计算 Kronecker 乘积。</li>
</ol>
<h3 id="6-8-其他"><a href="#6-8-其他" class="headerlink" title="6.8 其他"></a>6.8 其他</h3><p>除了上面这些归好类别的方法，numpy 中还有一些用于数学运算的方法，归纳如下：</p>
<ol>
<li>numpy.angle(z, deg)：返回复参数的角度。</li>
<li>numpy.real(val)：返回数组元素的实部。</li>
<li>numpy.imag(val)：返回数组元素的虚部。</li>
<li>numpy.conj(x)：按元素方式返回共轭复数。</li>
<li>numpy.convolve(a, v, mode)：返回线性卷积。</li>
<li>numpy.sqrt(x)：平方根。</li>
<li>numpy.cbrt(x)：立方根。</li>
<li>numpy.square(x)：平方。</li>
<li>numpy.absolute(x)：绝对值, 可求解复数。</li>
<li>numpy.fabs(x)：绝对值。</li>
<li>numpy.sign(x)：符号函数。</li>
<li>numpy.maximum(x1, x2)：最大值。</li>
<li>numpy.minimum(x1, x2)：最小值。</li>
<li>numpy.nan_to_num(x)：用 0 替换 NaN。</li>
<li>numpy.interp(x, xp, fp, left, right, period)：线性插值。</li>
<li>numpy.mean（） 平均值</li>
<li>numpy.std（） 标准差 numpy.var（） 方差</li>
<li>numpy.max（） 最大值numpy.min（） 最小值</li>
</ol>
<h2 id="7、代数运算"><a href="#7、代数运算" class="headerlink" title="7、代数运算"></a>7、代数运算</h2><p>上面，我们分为 8 个类别，介绍了 numpy 中常用到的数学函数。这些方法让复杂的计算过程表达更为简单。除此之外，numpy 中还包含一些代数运算的方法，尤其是涉及到矩阵的计算方法，求解特征值、特征向量、逆矩阵等，非常方便。</p>
<ol>
<li>numpy.linalg.cholesky(a)：Cholesky 分解。</li>
<li>numpy.linalg.qr(a ,mode)：计算矩阵的 QR 因式分解。</li>
<li>numpy.linalg.svd(a ,full_matrices,compute_uv)：奇异值分解。</li>
<li>numpy.linalg.eig(a)：计算正方形数组的特征值和右特征向量。</li>
<li>numpy.linalg.eigh(a, UPLO)：返回 Hermitian 或对称矩阵的特征值和特征向量。</li>
<li>numpy.linalg.eigvals(a)：计算矩阵的特征值。</li>
<li>numpy.linalg.eigvalsh(a, UPLO)：计算 Hermitian 或真实对称矩阵的特征值。</li>
<li>numpy.linalg.norm(x ,ord,axis,keepdims)：计算矩阵或向量范数。</li>
<li>numpy.linalg.cond(x ,p)：计算矩阵的条件数。</li>
<li>numpy.linalg.det(a)：计算数组的行列式。</li>
<li>numpy.linalg.matrix_rank(M ,tol)：使用奇异值分解方法返回秩。</li>
<li>numpy.linalg.slogdet(a)：计算数组的行列式的符号和自然对数。</li>
<li>numpy.trace(a ,offset,axis1,axis2,dtype,out)：沿数组的对角线返回总和。</li>
<li>numpy.linalg.solve(a,b)：求解线性矩阵方程或线性标量方程组。</li>
<li>numpy.linalg.tensorsolve(a,b ,axes)：为 x 解出张量方程a x = b</li>
<li>numpy.linalg.lstsq(a,b ,rcond)：将最小二乘解返回到线性矩阵方程。</li>
<li>numpy.linalg.inv(a)：计算逆矩阵。</li>
<li>numpy.linalg.pinv(a ,rcond)：计算矩阵的（Moore-Penrose）伪逆。</li>
<li>numpy.linalg.tensorinv(a ,ind)：计算N维数组的逆。</li>
</ol>
<h2 id="8、Numpy-数组索引和切片"><a href="#8、Numpy-数组索引和切片" class="headerlink" title="8、Numpy 数组索引和切片"></a>8、Numpy 数组索引和切片</h2><h3 id="8-1-数组索引"><a href="#8-1-数组索引" class="headerlink" title="8.1 数组索引"></a>8.1 数组索引</h3><p>我们可以通过索引值（从 0 开始）来访问 Ndarray 中的特定位置元素。Numpy 中的索引和 python 对 list 索引的方式非常相似，但又有所不同。我们一起来看一下：</p>
<p>首先是，一维数据索引：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">10</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取索引值为 1 的数据</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">1</span>]</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="comment"># 分别获取索引值为 1，2，3 的数据</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]]</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br></pre></td></tr></table></figure>
<p>对于二维数据而言：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">20</span>).reshape(<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">       [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>],</span><br><span class="line">       [<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取第 2 行，第 3 列的数据</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line"><span class="number">7</span></span><br></pre></td></tr></table></figure>
<p>如果，我们使用 python 中的 list 索引同样的值，看看有什么区别：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个数据相同的 list</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>],[ <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>],[<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>],[<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>]]</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 按照上面的方法获取第 2 行，第 3 列的数据，报错。</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: list indices must be integers <span class="keyword">or</span> slices, <span class="keyword">not</span> tuple</span><br><span class="line"> </span><br><span class="line"><span class="comment"># python 中 list 索引 2 维数据的方法</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">1</span>][<span class="number">2</span>]</span><br><span class="line"><span class="number">7</span></span><br></pre></td></tr></table></figure>
<p>如何索引二维 Ndarray 中的多个元素值，这里使用逗号,分割：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">20</span>).reshape(<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">       [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>],</span><br><span class="line">       [<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 索引</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>]]</span><br><span class="line">array([ <span class="number">8</span>, <span class="number">14</span>])</span><br></pre></td></tr></table></figure>
<p>这里需要注意索引的对应关系。我们实际获取的是[1,3]，也就是第2行和第4列对于的值8。以及[2, 4]，也就是第3行和第5列对于的值14。</p>
<p>那么，三维数据呢？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">30</span>).reshape(<span class="number">2</span>,<span class="number">5</span>,<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line">        [ <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>],</span><br><span class="line">        [ <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">        [ <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>],</span><br><span class="line">        [<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>],</span><br><span class="line">        [<span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>],</span><br><span class="line">        [<span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>],</span><br><span class="line">        [<span class="number">24</span>, <span class="number">25</span>, <span class="number">26</span>],</span><br><span class="line">        [<span class="number">27</span>, <span class="number">28</span>, <span class="number">29</span>]]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 索引</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[[<span class="number">0</span>,<span class="number">1</span>],[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">1</span>,<span class="number">2</span>]]</span><br><span class="line">array([ <span class="number">4</span>, <span class="number">23</span>])</span><br></pre></td></tr></table></figure>
<p>这里，[0,1]分布代表 axis = 0 和 axis = 1。而，后面的[1,2],[1,2] 分别选择了第 2 行第2 列和第 3 行第3 列的两个数。</p>
<h3 id="8-2-数组切片"><a href="#8-2-数组切片" class="headerlink" title="8.2 数组切片"></a>8.2 数组切片</h3><p>Numpy 里面针对Ndarray的数组切片和 python 里的list 切片操作是一样的。其语法为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Ndarray[start:stop:step]</span><br></pre></td></tr></table></figure>
<p>start:stop:step 分布代表起始索引：截至索引：步长。对于一维数组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">10</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[:<span class="number">5</span>]</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">5</span>:<span class="number">10</span>]</span><br><span class="line">array([<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>:<span class="number">10</span>:<span class="number">2</span>]</span><br><span class="line">array([<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>])</span><br></pre></td></tr></table></figure>
<p>对于多维数组，我们只需要用逗号,分割不同维度即可：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">20</span>).reshape(<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">       [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>],</span><br><span class="line">       [<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 先取第 3，4 列（第一个维度），再取第 1，2，3 行（第二个维度）。</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>:<span class="number">3</span>,<span class="number">2</span>:<span class="number">4</span>]</span><br><span class="line">array([[ <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">       [<span class="number">12</span>, <span class="number">13</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 按步长为 2 取所有列和所有行的数据。</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[:,::<span class="number">2</span>]</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">2</span>,  <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">5</span>,  <span class="number">7</span>,  <span class="number">9</span>],</span><br><span class="line">       [<span class="number">10</span>, <span class="number">12</span>, <span class="number">14</span>],</span><br><span class="line">       [<span class="number">15</span>, <span class="number">17</span>, <span class="number">19</span>]])</span><br></pre></td></tr></table></figure>
<p>当超过 3 维或更多维时，用 2 维数据的切片方式类推即可。</p>
<h3 id="8-3-索引与切片区别"><a href="#8-3-索引与切片区别" class="headerlink" title="8.3 索引与切片区别"></a>8.3 索引与切片区别</h3><p>你可能有点疑问，上面的索引和切片怎么看起来这么相似呢？</p>
<p>它们的语法的确很相似，但实际上有区别：</p>
<p><strong>1. 修改切片中的内容会影响原始数组。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.arange(<span class="number">10</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">1</span>] = <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([<span class="number">0</span>, <span class="number">100</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br></pre></td></tr></table></figure>
<p>除此之外，切片只能通过步长控制得到连续的值，而索引可以得到任意值。也就是说，索引的自由度更大。</p>
<h3 id="8-4-高级索引（Fancy-indexing）"><a href="#8-4-高级索引（Fancy-indexing）" class="headerlink" title="8.4 高级索引（Fancy indexing）"></a>8.4 高级索引（Fancy indexing）</h3><p>指使用列表或者数组进行索引:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">A = array([[n+m*<span class="number">10</span> <span class="keyword">for</span> n <span class="keyword">in</span> range(<span class="number">5</span>)] <span class="keyword">for</span> m <span class="keyword">in</span> range(<span class="number">5</span>)])</span><br><span class="line">print(A)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[[ 0  1  2  3  4]</span></span><br><span class="line"><span class="string"> [10 11 12 13 14]</span></span><br><span class="line"><span class="string"> [20 21 22 23 24]</span></span><br><span class="line"><span class="string"> [30 31 32 33 34]</span></span><br><span class="line"><span class="string"> [40 41 42 43 44]]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">row_indices = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">print(A[row_indices])</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">=&gt; array([[10, 11, 12, 13, 14],</span></span><br><span class="line"><span class="string">          [20, 21, 22, 23, 24],</span></span><br><span class="line"><span class="string">          [30, 31, 32, 33, 34]])</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">col_indices = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">-1</span>] <span class="comment"># remember, index -1 means the last element</span></span><br><span class="line">print(A[row_indices, col_indices])</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">=&gt; array([11, 22, 34])</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>我们也可以使用索引掩码:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">B = array([n <span class="keyword">for</span> n <span class="keyword">in</span> range(<span class="number">5</span>)])</span><br><span class="line">print(B)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">=&gt; array([0, 1, 2, 3, 4])</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">row_mask = array([<span class="keyword">True</span>, <span class="keyword">False</span>, <span class="keyword">True</span>, <span class="keyword">False</span>, <span class="keyword">False</span>])</span><br><span class="line">print(B[row_mask])</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">=&gt; array([0, 2])</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># same thing</span></span><br><span class="line">row_mask = array([<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>], dtype=bool)</span><br><span class="line">print(B[row_mask])</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">=&gt; array([0, 2])</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>使用比较操作符生成掩码:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> *</span><br><span class="line">x = arange(<span class="number">0</span>, <span class="number">10</span>, <span class="number">0.5</span>)</span><br><span class="line">print(x)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">=&gt; array([ 0. ,  0.5,  1. ,  1.5,  2. ,  2.5,  3. ,  3.5,  4. ,  4.5,  5. ,</span></span><br><span class="line"><span class="string">           5.5,  6. ,  6.5,  7. ,  7.5,  8. ,  8.5,  9. ,  9.5])</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">mask = (<span class="number">5</span> &lt; x) * (x &lt; <span class="number">7.5</span>)</span><br><span class="line">print(mask)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">=&gt; array([False, False, False, False, False, False, False, False, False,</span></span><br><span class="line"><span class="string">          False, False,  True,  True,  True,  True, False, False, False,</span></span><br><span class="line"><span class="string">          False, False], dtype=bool)</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(x[mask])</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">=&gt; array([ 5.5,  6. ,  6.5,  7. ])</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">mask=(<span class="number">5</span> &lt; x) - (x &lt; <span class="number">7.5</span>)</span><br><span class="line">print(mask)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[ True  True  True  True  True  True  True  True  True  True  True False</span></span><br><span class="line"><span class="string"> False False False  True  True  True  True  True]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(x[mask])</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[ 0.   0.5  1.   1.5  2.   2.5  3.   3.5  4.   4.5  5.   7.5  8.   8.5  9.</span></span><br><span class="line"><span class="string">  9.5]</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<h2 id="9、排序、搜索、计数"><a href="#9、排序、搜索、计数" class="headerlink" title="9、排序、搜索、计数"></a>9、排序、搜索、计数</h2><p>最后，再介绍几个 numpy 针对数组元素的使用方法，分别是排序、搜索和计数。</p>
<h3 id="9-1-排序"><a href="#9-1-排序" class="headerlink" title="9.1 排序"></a>9.1 排序</h3><p>我们可以使用 numpy.sort方法对多维数组元素进行排序。其方法为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.sort(a, axis=<span class="number">-1</span>, kind=<span class="string">'quicksort'</span>, order=<span class="keyword">None</span>)</span><br></pre></td></tr></table></figure>
<p>其中：</p>
<ul>
<li>a：数组。</li>
<li>axis：要排序的轴。如果为None，则在排序之前将数组铺平。默认值为 -1，沿最后一个轴排序。</li>
<li>kind：{‘quicksort’，’mergesort’，’heapsort’}，排序算法。默认值为 quicksort。</li>
</ul>
<p>举个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.random.rand(<span class="number">20</span>).reshape(<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[ <span class="number">0.32930243</span>,  <span class="number">0.63665893</span>,  <span class="number">0.67589989</span>,  <span class="number">0.05413352</span>,  <span class="number">0.26090526</span>],</span><br><span class="line">       [ <span class="number">0.6996066</span> ,  <span class="number">0.66006238</span>,  <span class="number">0.88240934</span>,  <span class="number">0.17563549</span>,  <span class="number">0.03015105</span>],</span><br><span class="line">       [ <span class="number">0.79075184</span>,  <span class="number">0.40115859</span>,  <span class="number">0.39336513</span>,  <span class="number">0.64691791</span>,  <span class="number">0.96333534</span>],</span><br><span class="line">       [ <span class="number">0.20052738</span>,  <span class="number">0.46157057</span>,  <span class="number">0.48653336</span>,  <span class="number">0.34537645</span>,  <span class="number">0.54597273</span>]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.sort(a)</span><br><span class="line">array([[ <span class="number">0.05413352</span>,  <span class="number">0.26090526</span>,  <span class="number">0.32930243</span>,  <span class="number">0.63665893</span>,  <span class="number">0.67589989</span>],</span><br><span class="line">       [ <span class="number">0.03015105</span>,  <span class="number">0.17563549</span>,  <span class="number">0.66006238</span>,  <span class="number">0.6996066</span> ,  <span class="number">0.88240934</span>],</span><br><span class="line">       [ <span class="number">0.39336513</span>,  <span class="number">0.40115859</span>,  <span class="number">0.64691791</span>,  <span class="number">0.79075184</span>,  <span class="number">0.96333534</span>],</span><br><span class="line">       [ <span class="number">0.20052738</span>,  <span class="number">0.34537645</span>,  <span class="number">0.46157057</span>,  <span class="number">0.48653336</span>,  <span class="number">0.54597273</span>]])</span><br></pre></td></tr></table></figure>
<p>除了 numpy.sort，还有这样一些对数组进行排序的方法：</p>
<ul>
<li>numpy.lexsort(keys ,axis)：使用多个键进行间接排序。</li>
<li>numpy.argsort(a ,axis,kind,order)：沿给定轴执行间接排序。</li>
<li>numpy.msort(a)：沿第 1 个轴排序。</li>
<li>numpy.sort_complex(a)：针对复数排序。</li>
</ul>
<h3 id="9-2-搜索和计数"><a href="#9-2-搜索和计数" class="headerlink" title="9.2 搜索和计数"></a>9.2 搜索和计数</h3><p>除了排序，我们可以通过下面这些方法对数组中元素进行搜索和计数。列举如下：</p>
<ol>
<li>argmax(a ,axis,out)：返回数组中指定轴的最大值的索引。</li>
<li>nanargmax(a ,axis)：返回数组中指定轴的最大值的索引,忽略 NaN。</li>
<li>argmin(a ,axis,out)：返回数组中指定轴的最小值的索引。</li>
<li>nanargmin(a ,axis)：返回数组中指定轴的最小值的索引,忽略 NaN。</li>
<li>argwhere(a)：返回数组中非 0 元素的索引,按元素分组。</li>
<li>nonzero(a)：返回数组中非 0 元素的索引。</li>
<li>flatnonzero(a)：返回数组中非 0 元素的索引,并铺平。</li>
<li>where(条件,x,y)：根据指定条件,从指定行、列返回元素。</li>
<li>searchsorted(a,v ,side,sorter)：查找要插入元素以维持顺序的索引。</li>
<li>extract(condition,arr)：返回满足某些条件的数组的元素。</li>
<li>count_nonzero(a)：计算数组中非 0 元素的数量。</li>
</ol>
<p>选取其中的一些方法举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.random.randint(<span class="number">0</span>,<span class="number">10</span>,<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([<span class="number">3</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argmax(a)</span><br><span class="line"><span class="number">17</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.nanargmax(a)</span><br><span class="line"><span class="number">17</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argmin(a)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.nanargmin(a)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.argwhere(a)</span><br><span class="line">array([[ <span class="number">0</span>],[ <span class="number">1</span>],[ <span class="number">3</span>],[ <span class="number">4</span>],[ <span class="number">5</span>],[ <span class="number">6</span>],[ <span class="number">7</span>],[ <span class="number">8</span>],[ <span class="number">9</span>],[<span class="number">10</span>],[<span class="number">11</span>],[<span class="number">12</span>],[<span class="number">13</span>],[<span class="number">14</span>],[<span class="number">15</span>],[<span class="number">16</span>],[<span class="number">17</span>],[<span class="number">18</span>],[<span class="number">19</span>]], dtype=int64)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.nonzero(a)</span><br><span class="line">(array([ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>], dtype=int64),)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.flatnonzero(a)</span><br><span class="line">array([ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>], dtype=int64)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.count_nonzero(a)</span><br><span class="line"><span class="number">19</span></span><br></pre></td></tr></table></figure>
<h2 id="10-操作-numpy-数组的常用函数"><a href="#10-操作-numpy-数组的常用函数" class="headerlink" title="10. 操作 numpy 数组的常用函数"></a>10. 操作 numpy 数组的常用函数</h2><p><strong>where</strong></p>
<p>使用 where 函数能将索引掩码转换成索引位置：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">x = arange(<span class="number">0</span>, <span class="number">10</span>, <span class="number">0.5</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">array([ 0. ,  0.5,  1. ,  1.5,  2. ,  2.5,  3. ,  3.5,  4. ,  4.5,  5. ,</span></span><br><span class="line"><span class="string">           5.5,  6. ,  6.5,  7. ,  7.5,  8. ,  8.5,  9. ,  9.5])</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">mask = (<span class="number">5</span> &lt; x) * (x &lt; <span class="number">7.5</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">=&gt; array([False, False, False, False, False, False, False, False, False,</span></span><br><span class="line"><span class="string">          False, False,  True,  True,  True,  True, False, False, False,</span></span><br><span class="line"><span class="string">          False, False], dtype=bool)</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line">x[mask]</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">=&gt; array([ 5.5,  6. ,  6.5,  7. ])</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line">indices = where(mask)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">=&gt; (array([11, 12, 13, 14]),)</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line">x[indices] <span class="comment"># this indexing is equivalent to the fancy indexing x[mask]</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">=&gt; array([ 5.5,  6. ,  6.5,  7. ])</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p><strong>diag</strong><br>使用 diag 函数能够提取出数组的对角线：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">A = array([[n+m*<span class="number">10</span> <span class="keyword">for</span> n <span class="keyword">in</span> range(<span class="number">5</span>)] <span class="keyword">for</span> m <span class="keyword">in</span> range(<span class="number">5</span>)])</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">=&gt; array([[ 0,  1,  2,  3,  4],</span></span><br><span class="line"><span class="string">          [10, 11, 12, 13, 14],</span></span><br><span class="line"><span class="string">          [20, 21, 22, 23, 24],</span></span><br><span class="line"><span class="string">          [30, 31, 32, 33, 34],</span></span><br><span class="line"><span class="string">          [40, 41, 42, 43, 44]])</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">diag(A)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">=&gt; array([ 0, 11, 22, 33, 44])</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">diag(A, <span class="number">-1</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">array([10, 21, 32, 43])</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p><strong>take</strong></p>
<p>take 函数与高级索引（fancy indexing）用法相似：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">v2 = arange(<span class="number">-3</span>,<span class="number">3</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">=&gt; array([-3, -2, -1,  0,  1,  2])</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">row_indices = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line">v2[row_indices] <span class="comment"># fancy indexing</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">=&gt; array([-2,  0,  2])</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">v2.take(row_indices)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">=&gt; array([-2,  0,  2])</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>但是 take 也可以用在 list 和其它对象上：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">take([<span class="number">-3</span>, <span class="number">-2</span>, <span class="number">-1</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>], row_indices)</span><br><span class="line"></span><br><span class="line">=&gt; array([-2,  0,  2])</span><br></pre></td></tr></table></figure>
<p><strong>choose</strong></p>
<p>选取多个数组的部分组成新的数组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">which = [<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>]</span><br><span class="line">choices = [[<span class="number">-1</span>,<span class="number">-2</span>,<span class="number">-3</span>,<span class="number">-4</span>], [<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>]]</span><br><span class="line">print(choose(which, choices))</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">=&gt; array([ 5, -2,  7, -4])</span></span><br></pre></td></tr></table></figure>

    </div>
    <p class="post-meta">
        <span class="post-cat">分类：
            <a class="cat-link" href="/categories/programming/">编程</a>
        </span>
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/python/" title="python">python</a>
    

        </span>
    </p>
</article>
<!-- 分享按钮 -->

    <div class="article-share clearfix text-center">
        <div class="share-area">
            <span class="share-txt">分享到：</span>
            <a href="javascript: window.open('http://service.weibo.com/share/share.php?url=' + encodeURIComponent(location.href) + '&title=' + document.title + '&language=zh_cn');" class="share-icon weibo"></a>
            <a href="javascript: Dialog.open('请复制链接到微信并发送');" class="share-icon wechat"></a>
            <a href="javascript: window.open('http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=' + encodeURIComponent(location.href) + '&title=' + document.title);" class="share-icon qqzone"></a>
            <a href="javascript: window.open('http://connect.qq.com/widget/shareqq/index.html?url=' + encodeURIComponent(location.href) + '&desc=sunny个人博客&title=' + document.title + '&callback=' + encodeURIComponent(location.href));" class="share-icon qq"></a>
            <a href="javascript: window.open('http://shuo.douban.com/!service/share?href=' + encodeURIComponent(location.href) + '&name=' + document.title + '&text=' + document.title);" class="share-icon douban"></a>
        </div>
    </div>


<!-- 上一篇/下一篇 -->

<div class="article-nav clearfix">
    
    <span class="prev fl">
        上一篇<br >
        <a href="/2017/offset/">
            
                js实现jquery的offset()方法(获取当前元素相对于文档的偏移量)
            
        </a>
    </span>
    

    
    <span class="next fr">
        下一篇<br >
        <a href="/2017/helloworld/">
            
                Hello World 非 Hello World
            
        </a>
    </span>
    
</div>

<!-- 文章评论 -->

    <script src="/js/comment.js"></script>
    <div id="comments" class="comment">
        <div class="sign-bar" id="commentSignBar"></div>
        <section class="box" id="commentBox">
            <div class="com-avatar">
                <img id="loginAvatar" src="/img/unsigned_avatar.jpg" alt="avatar">
            </div>
            <div class="com-text">
                <div class="main">
                    <textarea class="text-area-edited show" id="editBox" placeholder="欢迎评论！"></textarea>
                    <div class="text-area-preview" id="previewBox"></div>
                </div>
                <div class="switch">
                    <div class="switch-item on" id="editSwitcher">编辑</div>
                    <div class="switch-item" id="previewSwitcher">预览</div>
                </div>
                <div class="button" id="postComment">提交</div>
            </div>
        </section>
        <section class="tips clearfix" id="commentTips">注：评论支持 markdown 语法！</section>
        <section class="list-wrap" id="commentList">
            <div class="text-center">正在加载评论</div>
        </section>
        <!--
            <div class="sign-bar">
                GitHub 已登录!
                <span class="sign-link">登出</span>
            </div>
            <section class="box">
                <div class="com-avatar"><img src="/img/jelon.jpg" alt="avatar"></div>
                <div class="com-text">
                    <div class="main">
                        <textarea class="text-area-edited show" placeholder="欢迎评论！"></textarea>
                        <div class="text-area-preview"></div>
                    </div>
                    <div class="switch">
                        <div class="switch-item on">编辑</div>
                        <div class="switch-item">预览</div>
                    </div>
                    <div class="button">提交</div>
                </div>
            </section>
            <section class="tips">注：评论支持 markdown 语法！</section>
            <section class="list-wrap">
                <ul class="list">
                    <li>
                        <div class="user-avatar">
                            <a href="/">
                                <img src="/img/jelon.jpg" alt="user-avatar">
                            </a>
                        </div>
                        <div class="user-comment">
                            <div class="user-comment-header">
                                <span class="post-name">张德龙</span>
                                <span class="post-time">2017年12月12日</span>
                                <span class="like liked">已赞</span>
                                <span class="like-num">2</span>
                            </div>
                            <div class="user-comment-body">333333</div>
                        </div>
                    </li>
                    <li>
                        <div class="user-avatar">
                            <a href="/">
                                <img src="/img/jelon.jpg" alt="user-avatar">
                            </a>
                        </div>
                        <div class="user-comment">
                            <div class="user-comment-header">
                                <span class="post-name">刘德华</span>
                                <span class="post-time">2017年12月12日</span>
                                <span class="like">点赞</span>
                                <span class="like-num">2</span>
                            </div>
                            <div class="user-comment-body">vvvvv</div>
                        </div>
                    </li>
                </ul>
                <div class="page-nav">
                    <a href="javascript: void(0);" class="item">1</a>
                    <a href="javascript: void(0);" class="item">2</a>
                    <a href="javascript: void(0);" class="item current">3</a>
                </div>
            </section>
        -->
    </div>
    <script>
        CommentUtils.init({
            container: '#comments',
            label: 'pythonNumpy' || '2017/pythonNumpy/',
            owner: 'sunnyShining',
            repo: 'blog_comments',
            clientId: 'a6d772d870a68bc9c558',
            clientSecret: '4f3ed1ee231fa1e940c0530f86d5d788512f2027'
        });
    </script>


            </div>

        </section>
        <!-- 侧栏部分 -->
<aside class="sidebar">
    <section class="widget">
        <h3 class="widget-hd"><strong>文章分类</strong></h3>
        <!-- 文章分类 -->
<ul class="widget-bd">
    
    <li>
        <a href="/categories/programming/">编程</a>
        <span class="badge">(24)</span>
    </li>
    
    <li>
        <a href="/categories/life/">生活</a>
        <span class="badge">(3)</span>
    </li>
    
</ul>
    </section>

    
    <section class="widget">
        <h3 class="widget-hd"><strong>热门标签</strong></h3>
        <!-- 文章标签 -->
<div class="widget-bd tag-wrap">
  
    <a class="tag-item" href="/tags/js/" title="javascript">javascript (8)</a>
  
    <a class="tag-item" href="/tags/codeing/" title="codeing">codeing (2)</a>
  
    <a class="tag-item" href="/tags/css/" title="css">css (1)</a>
  
    <a class="tag-item" href="/tags/js/" title="js">js (3)</a>
  
    <a class="tag-item" href="/tags/life/" title="生活">生活 (3)</a>
  
    <a class="tag-item" href="/tags/linux/" title="linux">linux (1)</a>
  
    <a class="tag-item" href="/tags/react/" title="react">react (1)</a>
  
    <a class="tag-item" href="/tags/python/" title="python">python (5)</a>
  
    <a class="tag-item" href="/tags/webpack/" title="webpack">webpack (1)</a>
  
    <a class="tag-item" href="/tags/vue/" title="vue">vue (2)</a>
  
</div>
    </section>
    

    
    <!-- 我的微博 -->
    <section class="widget">
        <h3 class="widget-hd"><strong>我的微博</strong></h3>
        <div class="widget-bd" style="position: relative;">
    <div id="myWeiboLoading" class="text-center" style="position:absolute;top:0;left:0;right:0;bottom:0;line-height:50px;font-size:12px;background-color:#fff;z-index:9;">微博加载中...</div>
    <iframe id="myWeibo" width="100%" height="400" class="share_self"  frameborder="0" scrolling="no" src="https://widget.weibo.com/weiboshow/index.php?language=&width=0&height=400&fansRow=1&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=2449308854&verifier=454ed586&dpc=1"></iframe>
    <script>
        (function () {
            var oMyWeibo = document.getElementById('myWeibo');
            var oMyWeiboLoading = document.getElementById('myWeiboLoading');
            var timer = null;
            oMyWeibo.onload = function () {
                timer = setTimeout(function () {
                    oMyWeiboLoading.parentNode.removeChild(oMyWeiboLoading);
                    timer = null;
                }, 300);
            };
        })();
    </script>
</div>
    </section>
    

    
    <!-- 友情链接 -->
    <section class="widget">
        <h3 class="widget-hd"><strong>友情链接</strong></h3>
        <!-- 文章分类 -->
<ul class="widget-bd">
    
        <li>
            <a href="https://github.com/liaolongdong" target="_blank" title="liaolongdong的github">liaolongdong的github</a>
        </li>
    
        <li>
            <a href="https://github.com/CaptainYYH" target="_blank" title="CaptainYYH的github">CaptainYYH的github</a>
        </li>
    
        <li>
            <a href="https://github.com/Smile415" target="_blank" title="Smile415的github">Smile415的github</a>
        </li>
    
</ul>
    </section>
    
    
    <!-- 友情链接 -->
    <section class="widget">
        <h3 class="widget-hd"><strong>赞助</strong></h3>
        <!-- 赞助 -->
<ul class="widget-bd">
    
        <li>
            <a href="https://www.upyun.com/league?utm_source=baidu&amp;utm_medium=ppc&amp;utm_campaign=cdn&amp;utm_term=freecdn&amp;utm_content=fc001" target="_blank" title="又拍云">
            	<img width="100%" src="https://sunnyshining.github.io/img/sponsor/upyun_logo.png" alt="又拍云" />
            </a>
        </li>
    
</ul>
    </section>
    
</aside>
<!-- / 侧栏部分 -->
    </div>

    <!-- 博客底部 -->
    <footer class="footer">
    &copy;CopyRight
    
        2018-2019
    

    <a> SUNNY的博客 | 粤ICP备18140638号-1 <img src="/img/beian.png" style="vertical-align: middle;" /></a>
</footer>
<div class="back-to-top" id="backToTop" title="返回顶部">返回顶部</div>

    <!--博客js脚本 -->
    <!-- 这里放网站js脚本 -->
<script src="/js/main.js"></script>
    <div class="snow-container"></div>
    <style type="text/css">
    .snow-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 9999;
    }
    </style>
    <script type="text/javascript" src='//code.jquery.com/jquery-3.3.1.min.js'></script>
    <script src="/js/snowy.js"></script>
</body>
</html>